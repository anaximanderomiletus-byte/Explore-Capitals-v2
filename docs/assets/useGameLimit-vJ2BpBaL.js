import{k as D,r as n}from"./index-CiZWwFCN.js";import{i as p,c as o}from"./subscription-DwcNG9z6.js";const c=5;function I(){const{userProfile:a,updateUserProfile:s}=D(),t=n.useMemo(()=>p(a==null?void 0:a.subscriptionStatus,a==null?void 0:a.subscriptionPlan),[a==null?void 0:a.subscriptionStatus,a==null?void 0:a.subscriptionPlan]),e=n.useMemo(()=>{const m=new Date().toISOString().split("T")[0];return(a==null?void 0:a.lastGameDate)!==m?0:(a==null?void 0:a.dailyGamesPlayed)||0},[a==null?void 0:a.dailyGamesPlayed,a==null?void 0:a.lastGameDate]),{allowed:d,remaining:i}=n.useMemo(()=>o(t,e,c),[t,e]),G=n.useCallback(()=>{if(t)return;const m=new Date().toISOString().split("T")[0],y=(a==null?void 0:a.lastGameDate)===m&&(a==null?void 0:a.dailyGamesPlayed)||0;s({dailyGamesPlayed:y+1,lastGameDate:m})},[t,a==null?void 0:a.lastGameDate,a==null?void 0:a.dailyGamesPlayed,s]),l=n.useCallback(()=>{s({dailyGamesPlayed:0,lastGameDate:new Date().toISOString().split("T")[0]})},[s]);return{canPlay:d,gamesRemaining:i===1/0?c:i,gamesPlayed:e,dailyLimit:c,isPremium:t,incrementGamesPlayed:G,resetDailyCount:l}}export{I as u};
