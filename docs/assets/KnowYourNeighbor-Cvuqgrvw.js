import{r,k as U,a as V,u as W,M as R,j as e,l as O,m as f,S as K,b as k,L as J,n as F}from"./index-XWDUNfDH.js";import{F as Q}from"./FeedbackOverlay-Cq1ahV5C.js";import{N as X}from"./network-Ke354Qtc.js";import{P as Z}from"./play-BgS6ayBy.js";import{A as y}from"./arrow-left-BYcrqben.js";import{T as ee}from"./timer-B3gZtB4h.js";import"./star-B3fTSqnJ.js";import"./sparkles--g8jpY2H.js";import"./circle-check-hYOQbUwt.js";import"./circle-x-D8W6zfzV.js";const G=a=>[...a].sort(()=>Math.random()-.5),te=a=>Array.from(a).map(m=>String.fromCharCode(m.codePointAt(0)-127397).toLowerCase()).join("");function xe(){const[a,m]=r.useState("start"),[x,N]=r.useState(0),[l,z]=r.useState(60),[g,P]=r.useState([]),[o,I]=r.useState(null),[M,Y]=r.useState([]),[b,S]=r.useState([]),[c,h]=r.useState(null),[D,w]=r.useState(0),[_,v]=r.useState(null),[C,L]=r.useState(!1),{recordGameResult:T}=U(),$=V(),{setPageLoading:A}=W();r.useEffect(()=>{A(!1)},[A]),r.useEffect(()=>{const t=R.filter(s=>s.borders&&s.borders.length>0);P(t)},[]),r.useEffect(()=>{let t;return a==="playing"&&l>0?t=setInterval(()=>{z(s=>s-1)},1e3):l===0&&m("finished"),()=>clearInterval(t)},[a,l]),r.useEffect(()=>{a==="finished"&&!C&&(T({gameId:"know-your-neighbor",score:x,durationSeconds:60-l}),L(!0))},[a,C,T,x,l]);const B=t=>{const s=Math.floor(t/60),n=t%60;return`${s}:${String(n).padStart(2,"0")}`},j=()=>{if(g.length===0)return;const t=g[Math.floor(Math.random()*g.length)];I(t),S([]),h(null),v(null);const s=t.borders||[],n=R.filter(p=>p.name!==t.name&&!s.includes(p.name)).map(p=>p.name),d=G(n),i=Math.max(4,15-s.length),u=d.slice(0,i);Y(G([...s,...u]))},E=()=>{N(0),z(60),L(!1),h(null),w(0),j(),m("playing")},H=t=>{c||S(s=>s.includes(t)?s.filter(n=>n!==t):[...s,t])},q=()=>{if(!o||!o.borders)return;const t=o.borders,s=b,n=t.filter(i=>!s.includes(i)),d=s.filter(i=>!t.includes(i));n.length===0&&d.length===0?(N(i=>i+20),h("correct"),w(i=>i+1),v("Perfect!"),setTimeout(j,700)):(h("incorrect"),w(i=>i+1),v(`${n.length} missed, ${d.length} wrong.`),setTimeout(j,2500))};return e.jsx("div",{className:"h-[100dvh] min-h-screen bg-surface-dark font-sans relative overflow-hidden",children:e.jsxs(O,{mode:"wait",children:[a==="start"&&e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},className:"h-full flex items-center justify-center px-4",children:[e.jsx(K,{title:"Know Your Neighbor - Games",description:"Can you name all the bordering countries? Test your knowledge of world geography and country borders in this quiz."}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[100%] h-[100%] bg-sky/20 rounded-full blur-[150px] opacity-60 animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[80%] h-[80%] bg-accent/10 rounded-full blur-[120px] opacity-40 animate-pulse-slow"})]}),e.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-3xl rounded-3xl p-8 text-center border-2 border-white/20 relative z-10 overflow-hidden",children:[e.jsx("div",{className:"w-20 h-20 bg-sky/20 rounded-2xl flex items-center justify-center mx-auto mb-8 text-sky border border-white/30 relative overflow-hidden",children:e.jsx(X,{size:36,className:"relative z-10"})}),e.jsx("h1",{className:"text-4xl font-display font-black text-white mb-2 uppercase tracking-tighter drop-shadow-md",children:"Know Your Neighbor"}),e.jsx("p",{className:"text-white/40 text-[10px] mb-10 font-bold uppercase tracking-[0.2em] leading-relaxed",children:"Identify every bordering country."}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(k,{onClick:E,size:"md",className:"w-full h-16 text-xl uppercase tracking-widest font-black",children:["PLAY ",e.jsx(Z,{size:20,fill:"currentColor"})]}),e.jsxs("button",{onClick:()=>$("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group relative z-20 pointer-events-auto",children:[e.jsx(y,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})]},"start"),a==="playing"&&o&&e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"h-full flex flex-col px-3 md:px-4 pt-16 pb-2 md:pb-3 overflow-hidden",children:[e.jsx(K,{title:"Know Your Neighbor - Games",description:"Can you name all the bordering countries? Test your knowledge of world geography and country borders in this quiz."}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[10%] right-[10%] w-[60%] h-[60%] bg-sky/10 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[10%] left-[10%] w-[50%] h-[50%] bg-accent/5 rounded-full blur-[80px]"})]}),e.jsxs("div",{className:"max-w-2xl mx-auto w-full flex shrink-0 items-center gap-2 mb-2 md:mb-2 bg-white/10 backdrop-blur-2xl p-2 md:p-2.5 rounded-2xl border border-white/20 z-10",children:[e.jsx(J,{to:"/games",className:"p-2 bg-white/10 hover:bg-white/20 rounded-xl text-white/60 hover:text-white transition-all duration-75 border border-white/10 group shadow-inner shrink-0",children:e.jsx(y,{size:18,className:"transition-transform"})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center min-w-0",children:[e.jsx("h1",{className:"text-[8px] sm:text-[9px] md:text-[10px] font-black text-white uppercase tracking-[0.1em] sm:tracking-[0.15em] md:tracking-[0.3em] drop-shadow-md truncate max-w-full text-center",children:"Know Your Neighbor"}),e.jsx("div",{className:"h-0.5 w-6 bg-sky/40 rounded-full mt-1"})]}),e.jsx("div",{className:"w-[42px] shrink-0"})]}),e.jsxs("div",{className:"flex-1 max-w-2xl mx-auto w-full flex flex-col min-h-0 bg-white/10 backdrop-blur-3xl rounded-2xl md:rounded-3xl border border-white/20 p-2 md:p-4 overflow-hidden relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1 sm:mb-2 md:mb-2 relative z-20 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-2.5 py-1 md:px-3 md:py-1.5 rounded-xl shadow-inner bg-warning/20 border border-warning/40 relative shrink-0",children:[e.jsx(F,{size:14,className:"sm:w-4 sm:h-4 md:w-[18px] md:h-[18px] text-warning drop-shadow-md relative z-10"}),e.jsx("span",{className:"font-display font-black text-base sm:text-lg md:text-xl text-white tabular-nums drop-shadow-sm relative z-10",children:x})]}),e.jsxs("div",{className:`flex items-center gap-1.5 sm:gap-2 px-2 sm:px-2.5 py-1 md:px-3 md:py-1.5 rounded-xl shadow-inner transition-all duration-300 relative shrink-0 ${l<10?"bg-red-500/10 border-2 border-error animate-timer-panic":"bg-sky/25 text-white border border-white/30"}`,children:[e.jsx("div",{className:`relative z-10 ${l<10?"text-error":"text-sky-light"}`,children:e.jsx(ee,{size:14,className:"sm:w-4 sm:h-4 md:w-[18px] md:h-[18px]"})}),e.jsx("span",{className:`font-display font-black text-base sm:text-lg md:text-xl tabular-nums min-w-[28px] sm:min-w-[32px] md:min-w-[36px] relative z-10 drop-shadow-sm ${l<10?"text-error":"text-white"}`,children:B(l)})]})]}),e.jsx(O,{mode:"wait",children:e.jsxs(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"h-full flex flex-col justify-between relative z-10",children:[e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center min-h-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sky font-black text-[10px] md:text-xs uppercase tracking-[0.3em] md:tracking-[0.4em] mb-3 md:mb-4 font-sans",children:"SELECT ALL LAND NEIGHBORS FOR"}),e.jsx("img",{src:`https://flagcdn.com/w160/${te(o.flag)}.png`,alt:`${o.name} Flag`,className:"h-10 md:h-14 w-auto mx-auto mb-2 md:mb-3 drop-shadow-lg object-contain"}),e.jsx("h3",{className:"text-2xl md:text-3xl font-display font-black text-white leading-tight px-4 uppercase tracking-tighter drop-shadow-lg",children:o.name})]})}),e.jsx("div",{className:"shrink-0 px-1 pb-2",children:e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2 w-full",children:M.map(t=>{var u;const s=b.includes(t),n=(u=o.borders)==null?void 0:u.includes(t),d=s&&!n;let i="bg-white/5 border border-white/30 text-white/70 active:bg-white/10 active:border-sky/40 shadow-inner outline-none focus:outline-none focus:ring-0 select-none";return c?n&&s?i="bg-accent/70 border-accent text-white outline-none focus:outline-none focus:ring-0 select-none":n&&!s?i="bg-warning/40 border-warning text-white outline-none focus:outline-none focus:ring-0 select-none":s&&!n?i="bg-red-500/70 border-red-500 text-white outline-none focus:outline-none focus:ring-0 select-none":i="bg-white/5 border-white/5 text-white/10 opacity-40 grayscale blur-[1px] outline-none focus:outline-none focus:ring-0 select-none":s&&(i="bg-sky/60 border-sky/30 text-white shadow-[inset_0_0_12px_rgba(56,189,248,0.3)] outline-none focus:outline-none focus:ring-0 select-none"),e.jsx("button",{onClick:()=>H(t),disabled:!!c,className:`relative p-2 md:p-2.5 rounded-lg md:rounded-xl font-black text-[9px] md:text-[10px] flex items-center justify-center min-h-[44px] md:min-h-[48px] text-center transition-all duration-500 uppercase tracking-tight overflow-hidden group ${i} ${c&&d?"animate-shake":""} focus:outline-none focus:ring-0`,style:{WebkitTapHighlightColor:"transparent"},children:e.jsx("span",{className:"leading-tight line-clamp-2 relative z-10 drop-shadow-md",children:t})},t)})})}),e.jsxs("div",{className:"shrink-0 relative z-10 pt-2",children:[e.jsx("div",{className:"h-px w-full bg-white/10 mb-2"}),c?e.jsx("div",{className:`p-3 rounded-xl border flex items-center justify-center gap-3 font-black uppercase tracking-widest relative overflow-hidden animate-in zoom-in-95 duration-300 ${c==="correct"?"bg-accent/60 border-accent text-white":"bg-red-500/60 border-red-500 text-white"}`,children:e.jsx("span",{className:"text-sm relative z-10 drop-shadow-md",children:_})}):e.jsx(k,{onClick:q,disabled:b.length===0,className:"w-full h-10 md:h-11 text-xs md:text-sm uppercase tracking-widest",size:"lg",children:"Submit"})]})]},o.id)})]}),e.jsx(Q,{type:c,triggerKey:D})]},"playing"),a==="finished"&&e.jsx(f.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-3xl rounded-3xl p-10 text-center border-2 border-white/40 relative z-10 overflow-hidden",children:[e.jsx("div",{className:"w-20 h-20 bg-warning/20 rounded-full flex items-center justify-center mx-auto mb-8 text-warning border border-white/30 relative overflow-hidden",children:e.jsx(F,{size:36,className:"relative z-10"})}),e.jsx("h1",{className:"text-3xl font-display font-black text-white mb-1 uppercase tracking-tighter drop-shadow-md",children:"Finished"}),e.jsx("p",{className:"text-white/40 mb-6 text-[10px] font-bold uppercase tracking-[0.2em] drop-shadow-sm",children:"Final Score"}),e.jsx("div",{className:"text-7xl font-display font-black text-white mb-10 tabular-nums",children:x}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(k,{onClick:E,size:"md",className:"w-full h-16 text-xl uppercase tracking-widest font-black",children:"Play Again"}),e.jsxs("button",{onClick:()=>$("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group relative z-20 pointer-events-auto",children:[e.jsx(y,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})},"finished")]})})}export{xe as default};
