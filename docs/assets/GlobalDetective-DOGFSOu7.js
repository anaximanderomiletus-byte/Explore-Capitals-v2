import{j as e,A as D,m as x}from"./vendor-motion-CUvbj6jv.js";import{r as s,d as _,L as q}from"./vendor-react-CJteECPR.js";import{a as J,u as Q,G as X,S as ee,B as P,M as p}from"./index-m-nydE8T.js";import{F as te}from"./FeedbackOverlay-BOfIZOMY.js";import{k as E,P as ae,v as b,c as L,w as se,s as ie}from"./vendor-icons-Zx6pZiCF.js";import"./vendor-firebase-BmNGKg-n.js";const $=r=>[...r].sort(()=>Math.random()-.5);function me(){const[r,w]=s.useState("start"),[m,v]=s.useState(0),[l,j]=s.useState(60),[c,M]=s.useState(null),[I,O]=s.useState([]),[h,k]=s.useState(null),[F,B]=s.useState([]),[o,y]=s.useState(!1),[u,f]=s.useState(null),[K,N]=s.useState(0),[z,C]=s.useState(!1),{recordGameResult:S}=J(),R=_(),{setPageLoading:T}=Q();s.useEffect(()=>{T(!1)},[T]);const Z=X.find(t=>t.id==="6")?.image;s.useEffect(()=>{let t;return r==="playing"&&l>0?t=setInterval(()=>{j(a=>a-1)},1e3):l===0&&w("finished"),()=>clearInterval(t)},[r,l]);const H=t=>{const a=Math.floor(t/60),n=t%60;return`${a}:${String(n).padStart(2,"0")}`};s.useEffect(()=>{r==="finished"&&!z&&(S({gameId:"global-detective",score:m,durationSeconds:60-l}),C(!0))},[r,z,S,m,l]);const U=(t,a)=>{switch(a){case"Region":return{label:"Region",value:t.region};case"Currency":return{label:"Currency",value:t.currency};case"Language":return{label:"Language",value:t.languages[0]};case"Population":return{label:"Population",value:t.population};case"Area":return{label:"Land Area",value:t.area};case"GDP":return{label:"GDP (EST)",value:t.gdp||"N/A"};case"Time Zone":return{label:"Time Zone",value:t.timeZone||"N/A"};case"Calling Code":return{label:"Dialing Code",value:t.callingCode||"N/A"};case"Drive Side":return{label:"Drive Side",value:`${t.driveSide||"Right"}-hand`};default:return{label:"Region",value:t.region}}},A=()=>{k(null),f(null),y(!1);const t=p[Math.floor(Math.random()*p.length)];M(t);const g=$(["Region","Currency","Language","Population","Area","GDP","Time Zone","Calling Code","Drive Side"]).slice(0,3).map(d=>U(t,d));B(g);const i=[];for(;i.length<3;){const d=p[Math.floor(Math.random()*p.length)];d.id!==t.id&&!i.find(V=>V.id===d.id)&&i.push(d)}O($([t,...i]))},G=()=>{v(0),j(60),C(!1),f(null),N(0),A(),w("playing")},W=()=>{o||u||y(!0)},Y=t=>{if(u||!c)return;k(t);const a=t===c.name;f(a?"correct":"incorrect"),N(n=>n+1),a&&v(n=>n+(o?15:20)),setTimeout(A,700)};return e.jsxs("div",{className:"h-[100dvh] min-h-screen w-full relative overflow-hidden font-sans bg-surface-dark",children:[e.jsx(ee,{title:"Global Detective",description:"Deduce the mystery country from clues."}),e.jsxs("div",{className:"absolute inset-0 -z-10",children:[e.jsx("img",{src:Z,alt:"",className:"w-full h-full object-cover scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-surface-dark/80 backdrop-blur-xl"})]}),e.jsxs(D,{mode:"wait",children:[r==="start"&&e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},className:"h-full flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/20 backdrop-blur-3xl rounded-3xl p-8 text-center border-2 border-white/40 relative z-10 overflow-hidden group",children:[e.jsx("div",{className:"w-20 h-20 bg-sky/20 rounded-2xl flex items-center justify-center mx-auto mb-8 text-sky border border-white/30 relative overflow-hidden transition-transform duration-700",children:e.jsx(E,{size:36,className:"relative z-10"})}),e.jsx("h1",{className:"text-4xl font-display font-black text-white mb-2 uppercase tracking-tighter drop-shadow-md",children:"Global Detective"}),e.jsx("p",{className:"text-white/40 text-[10px] mb-10 font-bold uppercase tracking-[0.2em] leading-relaxed",children:"Identify the hidden country from clues."}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(P,{onClick:G,size:"md",className:"w-full h-16 text-xl uppercase tracking-widest font-black",children:["PLAY ",e.jsx(ae,{size:20,fill:"currentColor"})]}),e.jsxs("button",{onClick:()=>R("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group relative z-20 pointer-events-auto",children:[e.jsx(b,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})},"start"),r==="finished"&&e.jsx(x.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/20 backdrop-blur-3xl rounded-3xl p-10 text-center border-2 border-white/40 relative z-10 overflow-hidden group",children:[e.jsx("div",{className:"w-20 h-20 bg-warning/20 rounded-full flex items-center justify-center mx-auto mb-8 text-warning border border-white/30 relative overflow-hidden transition-transform duration-700",children:e.jsx(L,{size:36,className:"relative z-10"})}),e.jsx("h1",{className:"text-3xl font-display font-black text-white mb-1 uppercase tracking-tighter drop-shadow-md",children:"Finished"}),e.jsx("p",{className:"text-white/40 mb-6 text-[10px] font-bold uppercase tracking-[0.2em] drop-shadow-sm",children:"Final Score"}),e.jsx("div",{className:"text-7xl font-display font-black text-white mb-10 tabular-nums",children:m}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(P,{onClick:G,size:"md",className:"w-full h-16 text-xl uppercase tracking-widest font-black",children:"Play Again"}),e.jsxs("button",{onClick:()=>R("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group relative z-20 pointer-events-auto",children:[e.jsx(b,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})},"finished"),r==="playing"&&c&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"w-full h-full flex flex-col items-center justify-start relative z-10 px-3 md:px-4 pt-20 pb-4 md:pb-6",children:e.jsxs("div",{className:"w-full max-w-2xl flex flex-col flex-1 min-h-0 relative z-10",children:[e.jsxs("div",{className:"w-full flex shrink-0 items-center gap-2 mb-3 md:mb-4 bg-white/10 backdrop-blur-2xl p-2.5 md:p-3 rounded-2xl border border-white/20 z-10",children:[e.jsx(q,{to:"/games",className:"p-2 bg-white/10 hover:bg-white/20 rounded-xl text-white/60 hover:text-white transition-all duration-75 border border-white/10 group shadow-inner shrink-0",children:e.jsx(b,{size:18,className:"transition-transform"})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center min-w-0",children:[e.jsx("h1",{className:"text-[9px] sm:text-[10px] font-black text-white uppercase tracking-[0.15em] sm:tracking-[0.3em] drop-shadow-md truncate max-w-full text-center",children:"Global Detective"}),e.jsx("div",{className:"h-0.5 w-6 bg-sky/40 rounded-full mt-1"})]}),e.jsx("div",{className:"w-[42px] shrink-0"})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-white/15 backdrop-blur-3xl rounded-2xl md:rounded-3xl border border-white/30 p-3 sm:p-4 md:p-8 overflow-hidden relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 sm:mb-3 md:mb-4 relative z-20 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-2.5 py-1 md:px-3 md:py-1.5 rounded-xl shadow-inner bg-warning/20 border border-warning/40 relative shrink-0",children:[e.jsx(L,{size:14,className:"sm:w-4 sm:h-4 md:w-[18px] md:h-[18px] text-warning drop-shadow-md relative z-10"}),e.jsx("span",{className:"font-display font-black text-base sm:text-lg md:text-xl text-white tabular-nums drop-shadow-sm relative z-10",children:m})]}),e.jsxs("div",{className:`flex items-center gap-1.5 sm:gap-2 px-2 sm:px-2.5 py-1 md:px-3 md:py-1.5 rounded-xl shadow-inner transition-all duration-300 relative shrink-0 ${l<10?"bg-red-500/10 border-2 border-error animate-timer-panic":"bg-sky/25 text-white border border-white/30"}`,children:[e.jsx("div",{className:`relative z-10 ${l<10?"text-error":"text-sky-light"}`,children:e.jsx(se,{size:14,className:"sm:w-4 sm:h-4 md:w-[18px] md:h-[18px]"})}),e.jsx("span",{className:`font-display font-black text-base sm:text-lg md:text-xl tabular-nums min-w-[28px] sm:min-w-[32px] md:min-w-[36px] relative z-10 drop-shadow-sm ${l<10?"text-error":"text-white"}`,children:H(l)})]})]}),e.jsx(D,{mode:"wait",children:e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{duration:.3},className:"h-full flex flex-col justify-between relative z-10",children:[e.jsxs("div",{className:"flex flex-col flex-1 justify-center",children:[e.jsxs("h2",{className:"text-sky font-black uppercase tracking-[0.4em] text-[9px] mb-3 flex items-center gap-2 font-sans",children:[e.jsx(E,{size:12})," Geographic Intelligence"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 md:gap-2.5 mb-2 md:mb-4",children:[F.map((t,a)=>e.jsxs("div",{className:"px-4 rounded-xl border border-white/20 flex justify-between items-center h-[52px] md:h-[56px] transition-all duration-500 bg-white/5 group hover:bg-white/10 shadow-inner relative overflow-hidden",children:[e.jsx("span",{className:"text-[9px] font-black text-white/30 uppercase tracking-widest relative z-10",children:t.label}),e.jsx("span",{className:"font-display font-black text-white text-sm md:text-lg uppercase tracking-tight relative z-10 drop-shadow-md truncate ml-4",children:t.value})]},a)),e.jsxs("div",{className:`px-4 rounded-xl border flex justify-between items-center h-[52px] md:h-[56px] transition-all duration-500 relative overflow-hidden shadow-inner ${o?"bg-warning/20 border-warning/50":"bg-surface-dark border-white/10 cursor-pointer group"}`,onClick:W,children:[e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest relative z-10 ${o?"text-white":"text-white/20"}`,children:"Capital City"}),o?e.jsx("span",{className:"font-display font-black text-white text-sm md:text-lg uppercase tracking-tight relative z-10 drop-shadow-md",children:c.capital}):e.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[e.jsx("span",{className:"text-[9px] font-black text-white/10 tracking-[0.4em] hidden sm:block",children:"ENCRYPTED"}),e.jsx(ie,{size:14,className:"text-white/20"})]}),!o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-sm",children:e.jsx("span",{className:"text-white text-[9px] font-black uppercase tracking-[0.3em] drop-shadow-md",children:"Decrypt (-5 pts)"})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-2.5 shrink-0 pb-2 md:pb-4",children:I.map(t=>{const a=h===t.name,n=t.name===c.name,g=a&&!n;let i="bg-white/10 border-2 border-white/40 text-white active:bg-white/20 active:border-sky/50";return h&&(n?i="bg-accent/70 border-accent text-white":a?i="bg-red-500/70 border-red-500 text-white":t.name===c.name?i="bg-accent/40 border-accent/80 text-white":i="bg-white/5 border-white/5 text-white/20 opacity-40 grayscale blur-[1px]"),e.jsx("button",{onClick:()=>Y(t.name),disabled:!!h,className:`game-option relative p-2.5 md:p-3 rounded-2xl font-display font-black text-sm md:text-lg flex items-center justify-center min-h-[44px] md:min-h-[64px] transition-colors duration-500 uppercase tracking-tighter overflow-hidden ${i} ${g?"animate-shake":""}`,style:{WebkitTapHighlightColor:"transparent"},children:e.jsx("span",{className:"px-2 text-center leading-tight relative z-10 drop-shadow-sm",children:t.name})},t.id)})})]},c.id)})]})]})},"playing")]}),e.jsx(te,{type:u,triggerKey:K})]})}export{me as default};
