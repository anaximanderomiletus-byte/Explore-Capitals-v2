import{c as _,j as e,X as C,d as q,b as c,L as A,x as T,k as I,r as n,u as B,a as F,S as O,Z as U,P as M,O as $}from"./index-XWDUNfDH.js";import{S as P,F as G}from"./shield-Dyb46WrU.js";import{M as R}from"./mail-DgXmxvY3.js";import{a as D,b as Y,i as Z,C as y,d as X,e as H}from"./subscription-DHmQVy4C.js";import{G as J}from"./gamepad-2-CrkTOyRD.js";import{S as K}from"./sparkles--g8jpY2H.js";import{S as Q}from"./star-B3fTSqnJ.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],k=_("chart-column",W);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],S=_("loader-circle",ee),se=({isOpen:r,onClose:h,eligibility:s,onAcceptTerms:m,onResendVerification:o,isLoading:d=!1})=>{if(!r||!s||s.allowed)return null;const w=s.requiresEmailVerification?R:s.requiresTermsAcceptance?G:q,t=()=>s.requiresEmailVerification?"Email Verification Required":s.requiresTermsAcceptance?"Accept Terms of Service":"Payment Unavailable",l=()=>s.requiresEmailVerification&&o?e.jsx(c,{variant:"primary",onClick:o,disabled:d,className:"w-full",children:d?"Sending...":"Resend Verification Email"}):s.requiresTermsAcceptance&&m?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(A,{to:"/terms",target:"_blank",className:"flex-1",children:e.jsx(c,{variant:"secondary",className:"w-full text-sm",children:"View Terms"})}),e.jsx(A,{to:"/privacy",target:"_blank",className:"flex-1",children:e.jsx(c,{variant:"secondary",className:"w-full text-sm",children:"View Privacy"})})]}),e.jsx(c,{variant:"primary",onClick:m,disabled:d,className:"w-full",children:d?"Processing...":"Accept Terms & Continue"})]}):e.jsx(c,{variant:"secondary",onClick:h,className:"w-full",children:"Close"});return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:h}),e.jsxs("div",{className:"relative bg-surface-dark border-2 border-white/20 rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("button",{onClick:h,className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(C,{size:20,className:"text-white/60"})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-amber-500/20 rounded-full flex items-center justify-center",children:e.jsx(w,{size:32,className:"text-amber-400"})})}),e.jsx("h3",{className:"text-xl font-display font-bold text-white text-center mb-2",children:t()}),e.jsx("p",{className:"text-white/70 text-center text-sm mb-6 leading-relaxed",children:s.reason}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border border-white/10 rounded-xl mb-6",children:[e.jsx(P,{size:16,className:"text-sky-light flex-shrink-0"}),e.jsx("p",{className:"text-white/60 text-xs",children:"These requirements help protect your account and ensure secure transactions."})]}),l()]})]})};function te(){const{user:r}=T(),{userProfile:h,updateUserProfile:s}=I(),[m,o]=n.useState(null),[d,p]=n.useState(!1),[w,t]=n.useState(null),l=n.useCallback(async u=>{if(!r){const i={allowed:!1,reason:"Please sign in to make a purchase."};return o(i),i}p(!0),t(null);try{const i=await D(u);return o(i),i}catch(i){const N=i.message||"Failed to check eligibility";t(N);const f={allowed:!1,reason:N};return o(f),f}finally{p(!1)}},[r]),x=n.useCallback(async()=>{if(!r)throw new Error("Please sign in first.");p(!0),t(null);try{const u=await Y();s({termsAcceptedAt:new Date().toISOString(),termsVersion:u.version,privacyAcceptedAt:new Date().toISOString()}),await l()}catch(u){const i=u.message||"Failed to accept terms";throw t(i),new Error(i)}finally{p(!1)}},[r,s,l]),g=n.useCallback(()=>{l()},[l]);return n.useEffect(()=>{r?l():o(null)},[r==null?void 0:r.uid]),{eligibility:m,isLoading:d,error:w,checkEligibility:l,acceptTerms:x,refreshEligibility:g}}const me=()=>{const{setPageLoading:r}=B(),{user:h}=T(),{userProfile:s}=I(),m=F(),{eligibility:o,isLoading:d,acceptTerms:p,checkEligibility:w}=te(),[t,l]=n.useState("annual"),[x,g]=n.useState(!1),[u,i]=n.useState(null),[N,f]=n.useState(!1),b=X(),E=Z(s==null?void 0:s.subscriptionStatus,s==null?void 0:s.subscriptionPlan);n.useEffect(()=>{r(!1)},[r]);const v=async a=>{if(!h){m("/auth?redirect=/premium");return}if(!(await w()).allowed){f(!0);return}g(!0),i(null);try{const{url:j}=await H(a);j&&(window.location.href=j)}catch(j){console.error("Checkout error:",j),i(j.message||"Failed to start checkout. Please try again.")}finally{g(!1)}},L=async()=>{try{await p(),f(!1),v(t)}catch{}},V=[{name:"Daily Game Limit",free:"5 games/day",premium:"Unlimited",icon:J},{name:"Advertisements",free:"Yes",premium:"None",icon:P},{name:"Basic Statistics",free:!0,premium:!0,icon:k},{name:"Advanced Analytics",free:!1,premium:!0,icon:k},{name:"Regional Breakdown",free:!1,premium:!0,icon:k},{name:"Premium Badge",free:!1,premium:!0,icon:y},{name:"Exclusive Avatars",free:!1,premium:!0,icon:K},{name:"Early Access Features",free:!1,premium:!0,icon:U},{name:"Priority Support",free:!1,premium:!0,icon:Q}];return e.jsxs("div",{className:"pt-24 md:pt-32 pb-16 md:pb-20 px-4 md:px-6 bg-surface-dark min-h-screen relative overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[100%] h-[100%] bg-amber-500/5 rounded-full blur-[180px] animate-pulse-slow opacity-50"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[80%] h-[80%] bg-sky/3 rounded-full blur-[150px] animate-pulse-slow opacity-40"})]}),e.jsx(O,{title:"Premium - Unlimited Access",description:"Upgrade to ExploreCapitals Premium for unlimited games, ad-free experience, advanced analytics, and exclusive features."}),e.jsxs("div",{className:"max-w-5xl mx-auto relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-amber-500/30 border border-amber-500/40 rounded-full text-[10px] font-black uppercase tracking-[0.2em] text-amber-300 mb-6 relative overflow-hidden",children:[e.jsx(y,{size:12,className:"text-amber-400"}),e.jsx("span",{children:"Premium"})]}),e.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-display font-black text-white mb-4 tracking-tighter uppercase leading-none",children:"Go Premium"}),e.jsx("p",{className:"text-white/70 text-lg max-w-xl mx-auto",children:"Unlock unlimited games, remove ads, and access advanced analytics to master world geography."})]}),E&&e.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-amber-500/20 to-amber-600/20 border-2 border-amber-500/40 rounded-2xl text-center",children:[e.jsx(y,{size:32,className:"text-amber-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"You're a Premium Member!"}),e.jsxs("p",{className:"text-white/70 text-sm",children:["Plan: ",e.jsx("span",{className:"text-amber-400 font-bold capitalize",children:s==null?void 0:s.subscriptionPlan})]}),e.jsx(c,{variant:"secondary",className:"mt-4",onClick:()=>m("/settings"),children:"Manage Subscription"})]}),!E&&e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[e.jsxs("div",{className:`relative bg-white/10 backdrop-blur-xl border-2 rounded-2xl p-6 transition-all cursor-pointer ${t==="monthly"?"border-sky shadow-[0_0_30px_rgba(56,189,248,0.3)]":"border-white/20 hover:border-white/40"}`,onClick:()=>l("monthly"),children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:b.monthly.name}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-2",children:[e.jsx("span",{className:"text-3xl font-black text-white",children:"$5.99"}),e.jsx("span",{className:"text-white/50 text-sm",children:"/month"})]}),e.jsx("p",{className:"text-white/60 text-sm mb-4",children:b.monthly.description}),e.jsx(c,{variant:t==="monthly"?"primary":"secondary",className:"w-full",onClick:a=>{a.stopPropagation(),v("monthly")},disabled:x,children:x&&t==="monthly"?e.jsx(S,{className:"animate-spin",size:18}):"Subscribe"})]}),e.jsxs("div",{className:`relative bg-white/10 backdrop-blur-xl border-2 rounded-2xl p-6 transition-all cursor-pointer ${t==="annual"?"border-amber-500 shadow-[0_0_30px_rgba(245,158,11,0.3)]":"border-white/20 hover:border-white/40"}`,onClick:()=>l("annual"),children:[e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-4 py-1 bg-amber-500 rounded-full text-[10px] font-black uppercase tracking-wider text-black",children:"Most Popular"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1 mt-2",children:b.annual.name}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-1",children:[e.jsx("span",{className:"text-3xl font-black text-white",children:"$49.99"}),e.jsx("span",{className:"text-white/50 text-sm",children:"/year"})]}),e.jsx("p",{className:"text-amber-400 text-xs font-bold mb-2",children:b.annual.savings}),e.jsx("p",{className:"text-white/60 text-sm mb-4",children:b.annual.description}),e.jsx(c,{variant:t==="annual"?"accent":"secondary",className:"w-full",onClick:a=>{a.stopPropagation(),v("annual")},disabled:x,children:x&&t==="annual"?e.jsx(S,{className:"animate-spin",size:18}):"Subscribe"})]}),e.jsxs("div",{className:`relative bg-white/10 backdrop-blur-xl border-2 rounded-2xl p-6 transition-all cursor-pointer ${t==="lifetime"?"border-purple-500 shadow-[0_0_30px_rgba(168,85,247,0.3)]":"border-white/20 hover:border-white/40"}`,onClick:()=>l("lifetime"),children:[e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-4 py-1 bg-purple-500 rounded-full text-[10px] font-black uppercase tracking-wider text-white",children:"Best Value"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1 mt-2",children:b.lifetime.name}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-2",children:[e.jsx("span",{className:"text-3xl font-black text-white",children:"$99.99"}),e.jsx("span",{className:"text-white/50 text-sm",children:"once"})]}),e.jsx("p",{className:"text-white/60 text-sm mb-4",children:b.lifetime.description}),e.jsx(c,{variant:t==="lifetime"?"primary":"secondary",className:"w-full",onClick:a=>{a.stopPropagation(),v("lifetime")},disabled:x,children:x&&t==="lifetime"?e.jsx(S,{className:"animate-spin",size:18}):"Get Lifetime"})]})]}),u&&e.jsx("div",{className:"mb-8 p-4 bg-red-500/20 border border-red-500/40 rounded-xl text-center",children:e.jsx("p",{className:"text-red-400 text-sm",children:u})}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl border-2 border-white/20 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsx("h2",{className:"text-xl font-bold text-white",children:"Compare Plans"})}),e.jsxs("div",{className:"divide-y divide-white/10",children:[e.jsxs("div",{className:"grid grid-cols-3 px-6 py-4 bg-white/5",children:[e.jsx("div",{className:"text-white/60 text-sm font-bold uppercase tracking-wider",children:"Feature"}),e.jsx("div",{className:"text-white/60 text-sm font-bold uppercase tracking-wider text-center",children:"Free"}),e.jsx("div",{className:"text-amber-400 text-sm font-bold uppercase tracking-wider text-center",children:"Premium"})]}),V.map((a,z)=>e.jsxs("div",{className:"grid grid-cols-3 px-6 py-4 items-center hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{size:18,className:"text-white/40"}),e.jsx("span",{className:"text-white text-sm font-medium",children:a.name})]}),e.jsx("div",{className:"text-center",children:typeof a.free=="boolean"?a.free?e.jsx(M,{size:18,className:"text-green-400 mx-auto"}):e.jsx(C,{size:18,className:"text-white/30 mx-auto"}):e.jsx("span",{className:"text-white/60 text-sm",children:a.free})}),e.jsx("div",{className:"text-center",children:typeof a.premium=="boolean"?a.premium?e.jsx(M,{size:18,className:"text-amber-400 mx-auto"}):e.jsx(C,{size:18,className:"text-white/30 mx-auto"}):e.jsx("span",{className:"text-amber-400 text-sm font-bold",children:a.premium})})]},z))]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-3 text-white/50 text-sm",children:[e.jsx(P,{size:16}),e.jsx("span",{children:"Secure payments powered by Stripe. Cancel anytime."})]}),!h&&e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("p",{className:"text-white/60 mb-4",children:"Sign in to subscribe"}),e.jsxs(c,{variant:"primary",onClick:()=>m("/auth?redirect=/premium"),children:["Sign In ",e.jsx($,{size:18})]})]})]}),e.jsx(se,{isOpen:N,onClose:()=>f(!1),eligibility:o,onAcceptTerms:L,isLoading:d})]})};export{me as default};
