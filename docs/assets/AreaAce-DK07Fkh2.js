import{r as a,k as ae,a as se,u as re,M as ie,j as e,S as A,b as z,l as F,m as j,L as le,n as K}from"./index-CiZWwFCN.js";import{u as ne}from"./useGameLimit-vJ2BpBaL.js";import{F as ce}from"./FeedbackOverlay-DgFh_SJ6.js";import{L as oe}from"./lock-Crqy3MzO.js";import{C as O}from"./subscription-DwcNG9z6.js";import{A as k}from"./arrow-left-B8sVyQXc.js";import{M as U}from"./maximize-2-BElCvvOx.js";import{P as me}from"./play-DtxK7Vz6.js";import{T as de}from"./timer-CRqYsvNl.js";import"./star-Bg5RW-bC.js";import"./sparkles-BSPph7lO.js";import"./circle-check-BMdINluB.js";import"./circle-x-DTH34spA.js";const xe=s=>{if(!s)return 0;const c=parseFloat(s.replace(/[^0-9.]/g,""));return s.includes("M")?c*1e6:s.includes("K")?c*1e3:c},v=s=>Array.from(s).map(c=>String.fromCharCode(c.codePointAt(0)-127397).toLowerCase()).join("");function ze(){const[s,c]=a.useState("start"),[u,C]=a.useState(0),[n,S]=a.useState(60),[o,H]=a.useState(null),[m,V]=a.useState(null),[d,y]=a.useState(null),[Y,M]=a.useState(0),[q,$]=a.useState(null),[D,E]=a.useState(!1),[J,P]=a.useState(!1),[L,I]=a.useState(!1),{recordGameResult:T}=ae(),{isPremium:G}=ne(),h=se(),{setPageLoading:_}=re(),i=a.useMemo(()=>ie.map(t=>({...t,numericArea:xe(t.area)})),[]);a.useEffect(()=>{_(!1)},[_]),a.useEffect(()=>{let t;return s==="playing"&&n>0?t=setInterval(()=>{S(r=>r-1)},1e3):n===0&&c("finished"),()=>clearInterval(t)},[s,n]);const Q=t=>{const r=Math.floor(t/60),x=t%60;return`${r}:${String(x).padStart(2,"0")}`};a.useEffect(()=>{s==="finished"&&!L&&(T({gameId:"area-ace",score:u,durationSeconds:60-n}),I(!0))},[s,L,T,u,n]);const R=a.useCallback(()=>{y(null),$(null),E(!1),P(!1);const t=Math.floor(Math.random()*i.length);let r=Math.floor(Math.random()*i.length);for(;r===t;)r=Math.floor(Math.random()*i.length);H(i[t]),V(i[r]),(()=>{const f=Math.floor(Math.random()*i.length),p=Math.floor(Math.random()*i.length);[`https://flagcdn.com/w320/${v(i[f].flag)}.png`,`https://flagcdn.com/w320/${v(i[p].flag)}.png`].forEach(g=>{const N=new Image;N.src=g})})()},[i]),W=()=>{if(!G){h("/premium");return}C(0),S(60),I(!1),y(null),M(0),R(),c("playing")},X=t=>{if(d||!o||!m)return;$(t.id);const r=o.numericArea,x=m.numericArea,p=t.numericArea===Math.max(r,x);y(p?"correct":"incorrect"),M(l=>l+1),p&&C(l=>l+10),setTimeout(R,700)};return!G&&s==="start"?e.jsxs("div",{className:"h-[100dvh] min-h-screen bg-surface-dark font-sans relative overflow-hidden flex items-center justify-center px-4",children:[e.jsx(A,{title:"Area Ace - Premium Game",description:"Which country is larger? Test your geographic size knowledge."}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[100%] h-[100%] bg-amber-500/10 rounded-full blur-[150px] opacity-60"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[80%] h-[80%] bg-amber-600/10 rounded-full blur-[120px] opacity-40"})]}),e.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-3xl rounded-3xl p-8 text-center border-2 border-amber-500/30 relative z-10",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-500/20 rounded-2xl flex items-center justify-center mx-auto mb-8 border border-amber-500/30",children:e.jsx(oe,{size:36,className:"text-amber-400"})}),e.jsx("h1",{className:"text-4xl font-display font-black text-white mb-2 uppercase tracking-tighter",children:"Area Ace"}),e.jsx("p",{className:"text-amber-400 text-xs mb-6 font-bold uppercase tracking-[0.2em]",children:"Premium Game"}),e.jsx("p",{className:"text-white/60 text-sm mb-8",children:"Unlock this game and 3 more with Premium membership."}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(z,{onClick:()=>h("/premium"),className:"w-full h-14 bg-gradient-to-r from-amber-500 to-amber-600 border-0",children:[e.jsx(O,{size:18})," UNLOCK WITH PREMIUM"]}),e.jsxs("button",{onClick:()=>h("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group",children:[e.jsx(k,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})]}):e.jsx("div",{className:"h-[100dvh] min-h-screen bg-surface-dark font-sans relative overflow-hidden",children:e.jsxs(F,{mode:"wait",children:[s==="start"&&e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},className:"h-full flex items-center justify-center px-4",children:[e.jsx(A,{title:"Area Ace - Premium Game",description:"Which country is larger? Test your geographic size knowledge."}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[100%] h-[100%] bg-sky/20 rounded-full blur-[150px] opacity-60"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[80%] h-[80%] bg-amber-500/10 rounded-full blur-[120px] opacity-40"})]}),e.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-3xl rounded-3xl p-8 text-center border-2 border-white/20 relative z-10",children:[e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 bg-amber-500/20 rounded-full text-[9px] font-black text-amber-400 uppercase tracking-wider flex items-center gap-1",children:[e.jsx(O,{size:10})," Premium"]}),e.jsx("div",{className:"w-20 h-20 bg-sky/20 rounded-2xl flex items-center justify-center mx-auto mb-8 text-sky border border-white/30",children:e.jsx(U,{size:36})}),e.jsx("h1",{className:"text-4xl font-display font-black text-white mb-2 uppercase tracking-tighter",children:"Area Ace"}),e.jsx("p",{className:"text-white/40 text-[10px] mb-10 font-bold uppercase tracking-[0.2em]",children:"Choose the larger country."}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(z,{onClick:W,size:"md",className:"w-full h-16 text-xl uppercase tracking-widest font-black",children:["PLAY ",e.jsx(me,{size:20,fill:"currentColor"})]}),e.jsxs("button",{onClick:()=>h("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group",children:[e.jsx(k,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})]},"start"),s==="playing"&&o&&m&&e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"h-full flex flex-col px-3 md:px-4 pt-20 pb-4 md:pb-6 overflow-hidden",children:[e.jsx(A,{title:"Area Ace - Playing",description:"Which country is larger? Compare land areas in this geography game."}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[10%] right-[10%] w-[60%] h-[60%] bg-sky/10 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[10%] left-[10%] w-[50%] h-[50%] bg-accent/5 rounded-full blur-[80px]"})]}),e.jsxs("div",{className:"max-w-5xl mx-auto w-full flex shrink-0 items-center gap-2 mb-3 md:mb-4 bg-white/10 backdrop-blur-2xl p-2.5 md:p-3 rounded-2xl border border-white/20 z-10",children:[e.jsx(le,{to:"/games",className:"p-2 bg-white/10 hover:bg-white/20 rounded-xl text-white/60 hover:text-white transition-all border border-white/10 shrink-0",children:e.jsx(k,{size:18})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center min-w-0",children:[e.jsx("h1",{className:"text-[9px] sm:text-[10px] font-black text-white uppercase tracking-[0.15em] sm:tracking-[0.3em] truncate",children:"Area Ace"}),e.jsx("div",{className:"h-0.5 w-6 bg-sky/40 rounded-full mt-1"})]}),e.jsx("div",{className:"w-[42px] shrink-0"})]}),e.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full flex flex-col min-h-0 bg-white/10 backdrop-blur-3xl rounded-2xl md:rounded-3xl border border-white/20 overflow-hidden relative z-10 p-3 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 sm:mb-3 md:mb-4 relative z-20 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-2.5 py-1 md:px-3 md:py-1.5 rounded-xl shadow-inner bg-warning/20 border border-warning/40",children:[e.jsx(K,{size:14,className:"sm:w-4 sm:h-4 md:w-[18px] md:h-[18px] text-warning"}),e.jsx("span",{className:"font-display font-black text-base sm:text-lg md:text-xl text-white tabular-nums",children:u})]}),e.jsxs("div",{className:`flex items-center gap-1.5 sm:gap-2 px-2 sm:px-2.5 py-1 md:px-3 md:py-1.5 rounded-xl transition-all ${n<10?"bg-red-500/10 border-2 border-error animate-timer-panic":"bg-sky/25 text-white border border-white/30"}`,children:[e.jsx(de,{size:14,className:`sm:w-4 sm:h-4 md:w-[18px] md:h-[18px] ${n<10?"text-error":"text-sky-light"}`}),e.jsx("span",{className:`font-display font-black text-base sm:text-lg md:text-xl tabular-nums ${n<10?"text-error":"text-white"}`,children:Q(n)})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col px-0 md:px-2 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-3 md:mb-4 shrink-0",children:[e.jsx("p",{className:"text-sky-light font-black text-[9px] md:text-xs uppercase tracking-[0.3em]",children:"Which country has the"}),e.jsxs("h2",{className:"text-white font-display font-black text-xl md:text-3xl uppercase tracking-tighter flex items-center gap-2",children:[e.jsx(U,{size:24,className:"text-sky-light"})," Larger Area?"]})]}),e.jsx(F,{mode:"wait",children:e.jsx(j.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.02},transition:{duration:.3},className:"w-full h-full grid grid-cols-2 gap-3 md:gap-5 max-w-xl md:max-w-4xl mx-auto",children:[o,m].map((t,r)=>{if(!t)return null;const x=r===0?m:o,f=t.numericArea,p=x.numericArea,l=f>=p,g=r===0,N=g?D:J,Z=g?E:P,ee=v(t.flag),B=q===t.id,te=B&&!l;let b="bg-white/5 border border-white/10 active:bg-white/15 active:border-sky/50",w="text-white/80";return d&&(l?(b="bg-accent/60 border-2 border-accent z-20",w="text-white"):B?(b="bg-red-500/60 border-2 border-red-500 z-10",w="text-white"):(b="bg-black/20 border-white/5 opacity-30 z-0",w="text-white/20")),e.jsxs("div",{onClick:()=>X(t),className:`min-h-0 md:min-h-[320px] relative rounded-2xl md:rounded-3xl p-3 md:p-6 flex flex-col items-center justify-center transition-all duration-300 cursor-pointer ${b} ${te?"animate-shake":""}`,style:{WebkitTapHighlightColor:"transparent"},children:[e.jsx("div",{className:"mb-1 md:mb-2 flex items-center justify-center relative z-10 w-full min-h-[60px] md:min-h-[140px]",children:N?e.jsx("div",{className:`w-full max-w-[100px] md:max-w-[160px] aspect-[3/2] transition-all duration-500 ${d?"scale-[0.92] md:scale-[0.88]":"scale-100"} ${d&&!l?"opacity-40":"opacity-100"}`,children:e.jsx("img",{src:`https://flagcdn.com/w160/${v(t.flag)}.png`,alt:`${t.name} flag fallback`,className:"w-full h-full object-contain filter drop-shadow-[0_8px_16px_rgba(0,0,0,0.3)]"})}):e.jsx("div",{className:`w-full max-w-[100px] md:max-w-[200px] aspect-[3/2] flex items-center justify-center transition-all duration-500 ${d?"scale-[0.92] md:scale-[0.88]":"scale-100"}`,children:e.jsx("img",{src:`https://flagcdn.com/w320/${ee}.png`,alt:`${t.name} flag`,className:`w-full h-full object-contain filter drop-shadow-[0_8px_16px_rgba(0,0,0,0.3)] transition-opacity duration-500 ${d&&!l?"opacity-40":"opacity-100"}`,onError:()=>Z(!0)})})}),e.jsx("h3",{className:`text-xs md:text-xl font-display font-black mb-0 md:mb-2 leading-tight uppercase tracking-tighter transition-all duration-500 drop-shadow-lg line-clamp-2 text-center relative z-10 px-1 md:px-4 ${w}`,children:t.name}),e.jsxs("div",{className:`text-center relative z-10 w-full px-2 md:px-4 shrink-0 transition-all ${d?"duration-500 opacity-100 scale-100 mt-2 md:mt-3":"duration-0 opacity-0 scale-90 h-0 overflow-hidden pointer-events-none"}`,children:[e.jsx("div",{className:"h-px w-6 md:w-12 bg-white/20 mx-auto mb-1.5 md:mb-3"}),e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("span",{className:"text-sky-light uppercase font-black text-[6px] md:text-[9px] tracking-[0.2em] md:tracking-[0.3em] mb-0.5",children:"AREA (kmÂ²)"}),e.jsx("div",{className:`text-[11px] md:text-3xl font-display font-black tracking-tighter tabular-nums drop-shadow-[0_3px_10px_rgba(0,0,0,0.5)] ${l?"text-white":"text-white/60"}`,children:t.area})]})]})]},t.id)})},(o==null?void 0:o.id)+((m==null?void 0:m.id)||""))})]})]}),e.jsx(ce,{type:d,triggerKey:Y})]},"playing"),s==="finished"&&e.jsx(j.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-3xl rounded-3xl p-10 text-center border-2 border-white/20 relative z-10",children:[e.jsx("div",{className:"w-20 h-20 bg-warning/20 rounded-full flex items-center justify-center mx-auto mb-8 text-warning border border-white/30",children:e.jsx(K,{size:36})}),e.jsx("h1",{className:"text-3xl font-display font-black text-white mb-1 uppercase tracking-tighter",children:"Finished"}),e.jsx("p",{className:"text-white/40 mb-6 text-[10px] font-bold uppercase tracking-[0.2em]",children:"Final Score"}),e.jsx("div",{className:"text-7xl font-display font-black text-white mb-10 tabular-nums",children:u}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(z,{onClick:W,size:"md",className:"w-full h-16 text-xl uppercase tracking-widest font-black",children:"Play Again"}),e.jsxs("button",{onClick:()=>h("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group",children:[e.jsx(k,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})},"finished")]})})}export{ze as default};
