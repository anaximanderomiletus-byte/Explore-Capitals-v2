import{c as se,M as ye,n as he,o as Ke,p as Xe,q as qe,a as Be,r as c,T as Ue,D as Ye,u as He,j as e,s as Qe,k as Ve,m as Ge,S as G,B as fe,f as Je,C as O,l as J,X as Ze,R as Z}from"./index-DnLxxfOE.js";import{F as et}from"./FeedbackOverlay-CVakwxNN.js";import{staticTours as ge}from"./staticTours-BEH_GczY.js";import{STATIC_IMAGES as tt}from"./images-DjL2-05Q.js";import{M as st}from"./map-pin-D_mbrOxP.js";import{C as be}from"./circle-alert-DIIkza2i.js";import{A as at}from"./arrow-left-BXUOkif0.js";import{I as ae}from"./image-off-DwvsEQks.js";import"./sparkles-DKcIpffE.js";import"./circle-check-E6GJX0m5.js";import"./circle-x-Htwzw551.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],nt=se("chevron-left",rt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],lt=se("plane",it);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ct=se("rotate-ccw",ot),we=i=>new Promise(s=>setTimeout(s,i)),je="explore_capitals_v4_img_",dt="fallback_images",mt=i=>{try{const s=localStorage.getItem(`${je}${i}`);if(s)return s}catch(s){console.warn("Error reading from image cache",s)}return null},ut=(i,s)=>{try{localStorage.setItem(`${je}${i}`,s)}catch{console.warn("Local storage full or disabled, could not cache image for:",i)}},xt=async i=>{if(!he)return null;try{const s=Ke(he,dt,i.replace(/\//g,"_")),n=await Xe(s);if(n.exists())return n.data().url||null}catch(s){console.warn("Error reading from Firestore image store:",s)}return null},ve=async(i,s="landscape")=>{try{const n=tt[i];if(n)return n;const u=mt(i);if(u)return u;const p=await xt(i);if(p)return ut(i,p),p}catch(n){console.error("Error in getGeneratedImage:",n)}return null},pt=async i=>{if(ge[i])return await we(600),ge[i];const s=ye.find(n=>n.name===i);return s?(await we(800),{tourTitle:`Journey to ${s.name}`,introText:`${s.description} Join us as we explore the heart of this ${s.region} nation, learning about its capital, ${s.capital}, and its unique place in the world.`,stops:[{stopName:s.capital,imageKeyword:`${s.name} City`,description:[`Welcome to ${s.capital}, the bustling capital of ${s.name}. It serves as the political and cultural center of the nation.`,`As the seat of government, this city helps shape the future of its ${s.population} citizens. It's a place where history meets modern life.`,"Did you know? Capitals are often chosen for their strategic location near water or trade routes!","Take a moment to imagine the sounds of the local markets and the flow of daily life in this vibrant city."],question:`What is the capital city of ${s.name}?`,options:[s.capital,"Paris","Tokyo","Brasilia"],answer:s.capital,explanation:`${s.capital} is the official capital of ${s.name}.`},{stopName:`${s.region} Landscapes`,imageKeyword:`${s.region} Nature`,description:[`${s.name} is located in ${s.region}, a part of the world known for its distinct geography and climate.`,`From its total area of ${s.area} kmÂ², the land supports diverse ecosystems and wildlife unique to this part of the globe.`,`Fun Fact: ${s.name} uses the ${s.currency} as its currency, which is vital for its local economy.`,`As you travel through the countryside, you'll see why this nation is a key part of the ${s.region} continent.`],question:`Which continent is ${s.name} located in?`,options:[s.region,"Antarctica","Australia","South America"],answer:s.region,explanation:`${s.name} is located in the continent of ${s.region}.`},{stopName:"Local Culture",imageKeyword:`${s.name} Culture`,description:[`The culture of ${s.name} is rich and vibrant, influenced by its history and neighbors.`,`People here speak ${s.languages.join(", ")}, which connects them to their heritage and to each other.`,"Did you know? Language is one of the most important parts of a country's identity, preserving stories from generation to generation.","Imagine the sounds of traditional music and the smell of local dishes filling the air."],question:`What is a primary language spoken in ${s.name}?`,options:[s.languages[0],"Klingon","Latin","Esperanto"],answer:s.languages[0],explanation:`${s.languages[0]} is one of the main languages spoken in ${s.name}.`},{stopName:"Historic Landmarks",imageKeyword:`${s.name} Landmark`,description:[`Every country has landmarks that tell the story of its past. ${s.name} is no different.`,"From ancient structures to modern marvels, the architecture here reflects the ingenuity of its people.","Fun Fact: Many historic sites are protected to ensure future generations can learn from them.","Standing before these monuments, you can feel the weight of history and the passage of time."],question:`Does ${s.name} have historic landmarks?`,options:["Yes","No","Maybe","Only one"],answer:"Yes",explanation:`Like all nations, ${s.name} has landmarks that are significant to its history and culture.`},{stopName:"Natural Wonders",imageKeyword:`${s.name} Landscape`,description:[`Beyond the cities, ${s.name} is home to breathtaking natural beauty.`,"Whether it's mountains, rivers, or coastlines, the diverse environment supports a variety of plants and animals.","Did you know? Protecting nature is essential for maintaining the balance of our planet's ecosystems.",`Take a deep breath and imagine the fresh air and stunning views of the ${s.name} wilderness.`],question:`What is a key feature of ${s.name}'s geography?`,options:["Its natural landscapes","It has no land","It is entirely underwater","It is in space"],answer:"Its natural landscapes",explanation:`${s.name} is defined by its physical geography, including its land, water, and ecosystems.`}]}):null},ht=i=>Array.from(i).map(s=>String.fromCharCode(s.codePointAt(0)-127397).toLowerCase()).join(""),ee=({src:i,alt:s,imageKeyword:n,caption:u,region:p,rotation:N="rotate-0",className:K=""})=>{const[_,o]=Z.useState(i),[re,I]=Z.useState(!i);Z.useEffect(()=>{o(i),I(!i)},[i]);const X=()=>{I(!0),o(null)};return e.jsx("div",{className:`relative group rounded-3xl max-w-full overflow-hidden ${K}`,children:e.jsxs("div",{className:`p-1.5 sm:p-2 bg-black/80 backdrop-blur-3xl rounded-2xl sm:rounded-3xl border-2 sm:border-4 border-white/10 transform ${N} transition-all duration-700 relative overflow-hidden flex flex-col items-center group/glass`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 via-transparent to-white/10 pointer-events-none"}),e.jsxs("div",{className:"w-full aspect-video rounded-xl sm:rounded-[1.8rem] overflow-hidden relative group/img border-2 border-black/40 shadow-inner bg-[#0A0A0A]",children:[_?e.jsx("img",{src:_,alt:s,onError:X,className:"w-full h-full object-cover brightness-[1.05] contrast-[1.05] transition-all duration-1000"}):e.jsx("div",{className:"flex flex-col items-center justify-center text-white/20 w-full h-full bg-[#0A0A0A] p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 animate-in fade-in duration-500",children:[e.jsx(ae,{size:40,strokeWidth:1,className:"opacity-40"}),e.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] uppercase opacity-40",children:"Image Unavailable"})]})}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[linear-gradient(135deg,rgba(255,255,255,0.15)_0%,transparent_50%,rgba(255,255,255,0.05)_100%)] pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/10 rounded-[inherit] pointer-events-none"})]}),(u||p)&&e.jsxs("div",{className:"mt-2 sm:mt-3 pb-1 sm:pb-2 w-full px-3 sm:px-6 flex justify-between items-center relative z-10 gap-2",children:[u&&e.jsx("p",{className:"text-[8px] sm:text-[10px] font-black text-white/60 tracking-wider sm:tracking-widest uppercase font-display drop-shadow-md flex-1 truncate min-w-0",children:u}),p&&e.jsx("div",{className:"bg-white/5 border border-white/10 px-1.5 sm:px-2.5 py-0.5 rounded-md text-[5px] sm:text-[6px] font-black text-white/40 uppercase tracking-[0.15em] sm:tracking-[0.2em] shrink-0 whitespace-nowrap",children:p})]})]})})},z=({children:i,className:s="",transparent:n=!1})=>e.jsx("div",{id:"exploration-container",className:`min-h-screen z-40 relative ${n?"bg-transparent":"bg-surface-dark"} ${s}`,children:i}),te=({src:i,alt:s,className:n="",draggable:u})=>i?e.jsx("img",{src:i,alt:s,className:`w-full h-full object-cover ${n}`,draggable:u}):e.jsxs("div",{className:`w-full h-full bg-white/5 flex items-center justify-center flex-col p-4 text-center ${n}`,children:[e.jsx(ae,{className:"text-white/10 w-6 h-6 mb-2"}),e.jsx("span",{className:"text-white/10 font-bold uppercase tracking-widest text-[8px]",children:"No Visual"})]}),zt=()=>{const{id:i}=qe(),s=Be(),n=c.useMemo(()=>ye.find(r=>r.id===i)||Ue.find(r=>r.id===i)||Ye.find(r=>r.id===i),[i]),{setNavbarMode:u,setScrollThreshold:p,setHideFooter:N}=He(),[K,_]=c.useState(!0),[o,re]=c.useState(null),[I,X]=c.useState(0),[T,F]=c.useState(0),[E,ne]=c.useState(!1),[ie,Ne]=c.useState(null),[R,ke]=c.useState({}),[h,y]=c.useState("loading"),[m,L]=c.useState(0),[le,D]=c.useState(0),[q,b]=c.useState(!1),[P,g]=c.useState(!0),[oe,M]=c.useState("forward"),[Se,ce]=c.useState(""),[Te,B]=c.useState("Traveling"),f=c.useRef(null),[de,U]=c.useState(0),[w,Y]=c.useState(null),[k,W]=c.useState(null),[$e,me]=c.useState(0),[Ce,H]=c.useState(null),[ze,Q]=c.useState({}),ue=["Locating Destination...","Securing Flight Path...","Preparing Itinerary...","Synchronizing Maps...","Finalizing Briefing...","Optimizing Stop Scan...","Initiating Uplink..."];c.useEffect(()=>{h==="tour"?(u("hero"),p(window.innerHeight*.5),N(!0)):(u("default"),p(20),N(!1))},[h,u,p,N]),c.useEffect(()=>()=>{u("default"),p(20),N(!1)},[u,p,N]),c.useEffect(()=>{if(!n){const t=setTimeout(()=>{n||y("error")},3e3);return()=>clearTimeout(t)}const r=setInterval(()=>{X(t=>(t+1)%ue.length)},1500),a=setInterval(()=>{F(t=>E?t>=100?(clearInterval(a),100):Math.min(t+5,100):t>=40?t:t+.5)},100);return()=>{clearInterval(r),clearInterval(a)}},[n,E]),c.useEffect(()=>{if(!n)return;(async()=>{console.log("[Expedition] Fetching content for:",n.name);const a=setTimeout(()=>{E||(console.warn("[Expedition] Tour data fetch timed out. Forcing available state."),ne(!0),F(100))},8e3);try{const t=await pt(n.name);if(t){console.log("[Expedition] Tour data received");const l=t.stops.map(j=>({...j,options:[...j.options].sort(()=>Math.random()-.5)})),d={...t,stops:l};re(d);const x=ve(n.name,"landscape"),v=d.stops.map(j=>ve(j.imageKeyword||j.stopName,"landmark")),[V,...S]=await Promise.all([x,...v]);Ne(V);const $={};S.forEach((j,C)=>{$[C]=j}),ke($),F(95),clearTimeout(a),ne(!0),F(100),console.log("[Expedition] Loading complete")}else clearTimeout(a),console.error("[Expedition] No tour data returned"),y("error")}catch(t){clearTimeout(a),console.error("[Expedition] Error loading tour content",t),y("error")}})()},[n]),c.useEffect(()=>{if(T>=100&&E){const r=setTimeout(()=>{_(!1),y("intro")},800);return()=>clearTimeout(r)}},[T,E]),c.useEffect(()=>{const r=()=>{h==="tour"&&D(window.scrollY)};return window.addEventListener("scroll",r,{passive:!0}),()=>window.removeEventListener("scroll",r)},[h]);const Ie=()=>{M("forward"),B("Starting Tour"),b(!0),g(!1),setTimeout(()=>{y("tour"),L(0),D(0),window.scrollTo({top:0,behavior:"instant"}),setTimeout(()=>{g(!0)},100)},750),setTimeout(()=>{b(!1)},1600)},Ee=()=>{!o||q||(M("forward"),m>=o.stops.length-1?B("Preparing Files"):B(`Next Stop: ${o.stops[m+1].stopName}`),b(!0),g(!1),m<o.stops.length-1?setTimeout(()=>{L(r=>r+1),D(0),window.scrollTo({top:0,behavior:"instant"}),setTimeout(()=>{g(!0)},100)},750):setTimeout(()=>{y("quiz"),L(0),U(0),Q({}),Y(null),W(null),H(null),window.scrollTo({top:0,behavior:"instant"}),setTimeout(()=>{g(!0)},100)},750),setTimeout(()=>{b(!1)},1600))},Le=()=>{q||(M("backward"),m>0?ce(`Back to ${o.stops[m-1].stopName}`):ce("Back to Menu"),b(!0),g(!1),setTimeout(()=>{m>0?L(r=>r-1):y("intro"),D(0),window.scrollTo({top:0,behavior:"instant"}),setTimeout(()=>{g(!0)},100)},750),setTimeout(()=>{b(!1)},1600))},De=r=>{if(w||!o)return;Y(r);const a=o.stops[m],t=r===a.answer;W(t),me(l=>l+1),Q(l=>({...l,[m]:t})),t?(U(l=>l+1),H(a.explanation?a.explanation:"Great job.")):H(a.explanation?a.explanation:`The correct answer is ${a.answer}.`)},Me=()=>{o&&(Y(null),W(null),m<o.stops.length-1?(L(r=>r+1),window.scrollTo({top:0,behavior:"instant"})):(M("forward"),b(!0),g(!1),setTimeout(()=>{y("summary"),window.scrollTo({top:0,behavior:"instant"}),setTimeout(()=>{g(!0)},100)},750),setTimeout(()=>{b(!1)},1600)))},Ae=()=>{M("forward"),b(!0),g(!1),setTimeout(()=>{y("intro"),U(0),Q({}),W(null),me(0),D(0),window.scrollTo({top:0,behavior:"instant"}),setTimeout(()=>{g(!0)},100)},750),setTimeout(()=>{b(!1)},1600)},xe=r=>{if(!f.current)return;const a=f.current,t=window.innerWidth>=768?156:124,l=a.scrollLeft,d=Math.round(l/t),x=r==="left"?d-1:d+1;a.scrollTo({left:x*t,behavior:"smooth"})};if(c.useEffect(()=>{if(h!=="summary"||!f.current||!o)return;const r=f.current;let a;const t=o.stops.length,l=window.innerWidth>=768?156:124,d=t*l;r.scrollLeft=d;const x=()=>{const S=r.querySelectorAll(".carousel-card"),$=r.getBoundingClientRect(),j=$.left+$.width/2;S.forEach(C=>{const pe=C.getBoundingClientRect(),A=(pe.left+pe.width/2-j)/($.width/2),Fe=A*-25,Re=1-Math.min(.25,Math.abs(A)*.35),Pe=Math.floor(100-Math.abs(A)*50),We=1-Math.min(.6,Math.abs(A)*.9),Oe=A*-30;C.style.transform=`perspective(1000px) rotateY(${Fe}deg) scale(${Re}) translateX(${Oe}px)`,C.style.zIndex=Pe,C.style.opacity=Math.max(.4,We)})},v=()=>{const S=r.scrollLeft;S<d*.5?r.scrollLeft=S+d:S>d*1.5&&(r.scrollLeft=S-d),cancelAnimationFrame(a),a=requestAnimationFrame(x)};r.addEventListener("scroll",v,{passive:!0});const V=setTimeout(x,50);return()=>{r.removeEventListener("scroll",v),cancelAnimationFrame(a),clearTimeout(V)}},[h,o]),!n)return e.jsx("div",{className:"p-10 text-center text-white font-black uppercase tracking-widest",children:"Target not found."});const _e=()=>{try{if(h==="loading"||K)return e.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:e.jsxs(z,{className:"flex items-center justify-center px-4 md:px-6 pt-20 pb-12 overflow-hidden bg-surface-dark relative",children:[e.jsx(G,{title:"Loading...",description:"Preparing your expedition."}),e.jsx("div",{className:"absolute inset-0 z-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.05) 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none overflow-hidden opacity-30",children:e.jsx("div",{className:"w-full h-[2px] bg-sky-light/50 blur-sm absolute top-0 left-0 animate-scan-line"})}),e.jsxs("div",{className:"fixed inset-0 z-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[120%] h-[120%] bg-sky/20 rounded-full blur-[160px] opacity-80 animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[100%] h-[100%] bg-accent/10 rounded-full blur-[140px] opacity-60 animate-pulse-slow"}),e.jsx("div",{className:"absolute top-[30%] left-[20%] w-[40%] h-[40%] bg-white/5 rounded-full blur-[100px] animate-float"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-lg flex flex-col items-center",children:[e.jsxs("div",{className:"w-full bg-black/40 backdrop-blur-3xl rounded-[2.5rem] p-8 md:p-12 text-center border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 via-transparent to-white/10 pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-5 pointer-events-none"}),e.jsx("div",{className:"absolute top-6 left-6 w-10 h-10 border-t-2 border-l-2 border-sky/30 rounded-tl-2xl"}),e.jsx("div",{className:"absolute top-6 right-6 w-10 h-10 border-t-2 border-r-2 border-sky/30 rounded-tr-2xl"}),e.jsx("div",{className:"absolute bottom-6 left-6 w-10 h-10 border-b-2 border-l-2 border-sky/30 rounded-bl-2xl"}),e.jsx("div",{className:"absolute bottom-6 right-6 w-10 h-10 border-b-2 border-r-2 border-sky/30 rounded-tr-2xl"}),e.jsxs("div",{className:"mb-8 relative pt-4",children:[e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-48 h-4 bg-sky/20 blur-2xl rounded-full animate-pulse"}),e.jsxs("div",{className:"relative z-10 w-44 h-auto mx-auto mb-6 transform-gpu perspective-1000",children:[e.jsx("div",{className:"relative animate-float-slow",children:e.jsx("img",{src:`https://flagcdn.com/w320/${ht(n.flag)}.png`,alt:`${n.name} Flag`,className:"w-full h-auto object-contain relative z-10"})}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-72 h-72 border border-sky/10 rounded-full animate-spin-slow opacity-20"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 border border-dashed border-white/5 rounded-full animate-reverse-spin opacity-20"})]})]}),e.jsxs("div",{className:"space-y-4 mb-10",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 px-5 py-2 bg-sky/10 rounded-full border border-white/10 mb-2 shadow-inner group",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-sky animate-ping"}),e.jsx("span",{className:"text-[10px] font-black text-sky-light uppercase tracking-[0.5em]",children:T<100?"Establishing Link":"Connection Secured"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] text-white/40 tracking-[0.4em] uppercase mb-1 font-black",children:"Destination"}),e.jsx("h1",{className:"text-3xl md:text-5xl font-display font-black text-white tracking-tighter uppercase leading-tight",children:n.name})]})]}),e.jsxs("div",{className:"relative w-full mb-10 px-4",children:[e.jsxs("div",{className:"flex justify-between items-end mb-3 px-1",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-[9px] font-black text-white/40 uppercase tracking-widest",children:"System Load"}),e.jsx("div",{className:"h-0.5 w-8 bg-sky/40 rounded-full mt-1"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-2xl font-display font-black text-white tabular-nums",children:Math.round(T)}),e.jsx("span",{className:"text-[10px] font-black text-sky-light tracking-widest",children:"%"})]})]}),e.jsx("div",{className:"w-full h-3 bg-white/5 rounded-full overflow-hidden border border-white/10 shadow-inner p-0.5 relative group",children:e.jsxs("div",{className:"h-full bg-gradient-to-r from-sky via-sky-light to-sky transition-all duration-300 ease-out rounded-full relative",style:{width:`${T}%`},children:[e.jsx("div",{className:"absolute inset-0 w-full h-full animate-shimmer bg-[linear-gradient(90deg,transparent,rgba(255,255,255,0.6),transparent)] bg-[length:200%_100%]"}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full blur-md opacity-80"})]})}),e.jsx("div",{className:"flex gap-1.5 mt-4 justify-center",children:[...Array(8)].map((r,a)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-500 ${T>a*12.5?"bg-sky":"bg-white/5 border border-white/5"}`},a))})]}),e.jsx("div",{className:"flex flex-col items-center justify-center h-8 relative",children:e.jsxs("div",{className:"flex items-center gap-4 text-white/40",children:[e.jsx("div",{className:"w-8 h-[1px] bg-gradient-to-r from-transparent to-sky/40"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] animate-in slide-in-from-bottom-2 fade-in duration-500 text-sky-light/80",children:ue[I]},I),e.jsx("div",{className:"w-8 h-[1px] bg-gradient-to-l from-transparent to-sky/40"})]})})]}),e.jsxs("div",{className:"mt-10 grid grid-cols-3 gap-12 w-full px-6 opacity-30",children:[e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsx("span",{className:"text-[8px] font-black text-white/40 uppercase tracking-widest",children:"Coordinates"}),e.jsxs("span",{className:"text-[9px] font-black text-white tabular-nums",children:[n.lat.toFixed(4),"N ",n.lng.toFixed(4),"E"]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-[8px] font-black text-white/40 uppercase tracking-widest",children:"Protocol"}),e.jsx("span",{className:"text-[9px] font-black text-sky-light tracking-tighter",children:"SECURE-UPLINK-v4"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:"text-[8px] font-black text-white/40 uppercase tracking-widest",children:"Archive Status"}),e.jsx("span",{className:"text-[9px] font-black text-white tracking-widest",children:T<100?"BUFFERING":"READY"})]})]})]})]})},"loading");if(h==="error"||!o)return e.jsx(z,{className:"flex items-center justify-center pt-24 pb-12 px-4 md:px-6 bg-surface-dark",children:e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center max-w-sm",children:[e.jsx("div",{className:"w-20 h-20 bg-red-500/20 rounded-[2rem] flex items-center justify-center mb-8 text-red-500 border border-red-500/30",children:e.jsx(be,{size:40})}),e.jsx("h2",{className:"text-2xl font-display font-black mb-4 text-white uppercase tracking-tighter",children:"Connection Issue"}),e.jsx("p",{className:"text-white/40 mb-10 leading-relaxed font-bold uppercase tracking-widest text-[10px]",children:"We couldn't retrieve the expedition data from the archive."}),e.jsx(fe,{onClick:()=>s(`/country/${n.id}`),variant:"primary",className:"w-full h-16 text-white uppercase tracking-widest rounded-full",children:"RETURN TO COUNTRY"})]})});if(h==="intro")return e.jsxs(z,{className:"w-full min-h-[100dvh] bg-surface-dark flex flex-col items-center justify-center pt-16 pb-12 px-3 sm:px-4 md:px-6 relative overflow-hidden",transparent:!0,children:[e.jsx(G,{title:`Expedition - ${n.name}`,description:`Explore ${n.name} with a virtual expedition.`,image:ie||void 0,imageAlt:`Scenery of ${n.name}`}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[120%] h-[120%] bg-sky/15 rounded-full blur-[160px] opacity-80 animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[100%] h-[100%] bg-accent/10 rounded-full blur-[140px] opacity-60 animate-pulse-slow"})]}),e.jsx("div",{className:`relative z-10 w-full max-w-4xl flex flex-col items-center transition-all duration-500 px-1 ${P?"opacity-100 scale-100 blur-0":"opacity-0 scale-95 blur-sm"}`,children:e.jsxs("div",{className:"p-2 sm:p-4 md:p-6 text-center relative w-full overflow-hidden",children:[e.jsxs("div",{className:"space-y-1 mb-2 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-0.5 bg-sky/30 rounded-full border border-white/40 text-[7px] font-black tracking-[0.4em] text-white relative overflow-hidden mx-auto",children:[e.jsx(Je,{size:10,className:"text-sky-light"}),e.jsx("span",{className:"relative z-10 uppercase",children:"Virtual Tour"})]}),e.jsx("h1",{className:"text-xl md:text-2xl font-display font-black text-white leading-tight uppercase tracking-tighter drop-shadow-md",children:o.tourTitle}),e.jsx("p",{className:"text-[10px] md:text-[11px] text-white/70 font-bold italic leading-snug drop-shadow-sm max-w-2xl mx-auto",children:o.introText})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2.5 mb-1.5 w-full overflow-hidden",children:[e.jsx("div",{className:"max-w-lg w-full relative group px-1",children:e.jsx(ee,{src:ie,alt:n.name,imageKeyword:n.name,caption:`${n.capital}, ${n.name}`,region:n.region,rotation:"rotate-0",className:"w-full"})}),e.jsxs("div",{className:"flex flex-col items-center gap-1 w-full",children:[e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("span",{className:"text-[7px] font-black text-white/30 uppercase tracking-[0.4em]",children:"Planned Itinerary"}),e.jsx("div",{className:"h-0.5 w-10 bg-sky/40 rounded-full"})]}),e.jsxs("div",{className:"relative flex justify-center w-full",children:[e.jsx("div",{className:"absolute top-5 left-[15%] right-[15%] h-px bg-gradient-to-r from-transparent via-white/30 to-transparent z-0 hidden md:block"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 md:gap-6 relative z-10",children:o.stops.map((r,a)=>{const t=r.stopName.replace(/\s*\(.*\)/,"").trim();return e.jsxs("div",{className:"flex flex-col items-center gap-2 group/stop w-20 md:w-24",children:[e.jsxs("div",{className:"w-10 h-10 shrink-0 rounded-lg bg-black/40 border border-white/10 overflow-hidden relative shadow-inner",children:[e.jsx(te,{src:R[a],alt:r.stopName,className:"opacity-60 group-hover/stop:opacity-100 transition-opacity duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none"}),e.jsxs("div",{className:"absolute bottom-0 right-0 bg-sky/80 text-white text-[6px] font-black px-0.5 rounded-tl-md",children:["0",a+1]})]}),e.jsxs("div",{className:"flex flex-col items-center text-center w-full",children:[e.jsx("span",{className:"text-[8px] font-black text-white uppercase tracking-wider group-hover/stop:text-sky-light transition-colors leading-tight w-full line-clamp-2",children:t}),e.jsx("span",{className:"text-[6px] font-bold text-white/20 uppercase tracking-widest",children:"Waypoint"})]})]},a)})})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full items-center pt-0.5",children:[e.jsxs("div",{className:"inline-flex items-center justify-center gap-2 px-3 py-1 bg-yellow-400/10 hover:bg-yellow-400/20 rounded-full border border-yellow-400/30 hover:border-yellow-400/60 shadow-inner group/warning transition-all duration-300 cursor-default mb-1",children:[e.jsx(be,{size:10,className:"text-yellow-400 group-hover/warning:text-yellow-300 transition-colors"}),e.jsx("span",{className:"text-[7px] font-black text-yellow-400/90 group-hover/warning:text-white uppercase tracking-wider transition-colors",children:"This tour ends with a brief assessment to test your knowledge."})]}),e.jsxs("button",{onClick:Ie,className:"group relative w-full max-w-[320px] h-12 rounded-2xl overflow-hidden transition-all duration-500",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sky/70 via-sky/80 to-sky/70 group-hover:from-sky/80 group-hover:via-sky/90 group-hover:to-sky/80 transition-all"}),e.jsx("div",{className:"absolute inset-[1px] rounded-2xl border border-white/10"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-3 h-full",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.2em] text-white/90",children:"Start Tour"}),e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/10 flex items-center justify-center group-hover:bg-white/20 transition-colors",children:e.jsx(O,{size:14,className:"text-white/80 transition-all"})})]})]}),e.jsx("button",{onClick:()=>s(`/country/${n.id}`),className:"text-[9px] font-black uppercase tracking-[0.2em] text-white/30 hover:text-sky transition-colors py-1",children:"GO BACK"})]})]})})]});if(h==="tour"){const r=o.stops[m],a=m===o.stops.length-1,t=R[m];return e.jsxs(z,{className:"w-full min-h-screen bg-surface-dark flex flex-col items-center overflow-x-hidden",children:[e.jsxs("div",{className:"fixed inset-0 w-full h-full -z-10 overflow-hidden bg-black",children:[e.jsx("div",{className:"absolute inset-0 transition-transform duration-1000 ease-out scale-110",style:{transform:`translateY(${le*.2}px) scale(${1.1+le*1e-4})`},children:e.jsx(te,{src:t,alt:r.stopName,className:"object-cover w-full h-full opacity-60 contrast-[1.1] brightness-[0.8]"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-surface-dark/40 via-transparent to-surface-dark"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_0%,rgba(0,0,0,0.4)_100%)]"}),e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[70%] h-[70%] bg-sky/10 rounded-full blur-[120px] animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[-5%] right-[-5%] w-[60%] h-[60%] bg-accent/5 rounded-full blur-[100px] animate-pulse-slow delay-1000"})]}),e.jsx("div",{className:"sticky top-20 z-50 w-full px-4 sm:px-6 flex justify-center items-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-2xl border border-white/20 rounded-full px-3 sm:px-6 py-2 flex items-center gap-2 sm:gap-4 animate-in slide-in-from-top-4 duration-700 pointer-events-auto max-w-full overflow-hidden",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-sky animate-pulse shrink-0"}),e.jsxs("span",{className:"text-[9px] sm:text-[10px] font-black text-white uppercase tracking-[0.2em] sm:tracking-[0.4em] shrink-0",children:["STOP ",m+1," OF ",o.stops.length]}),e.jsx("div",{className:"h-4 w-[1px] bg-white/20 shrink-0"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-sky-light uppercase tracking-[0.1em] sm:tracking-[0.2em] truncate",children:r.stopName})]})}),e.jsx("div",{className:`relative z-10 w-full max-w-6xl px-4 sm:px-6 md:px-8 pt-24 pb-20 flex flex-col items-center justify-center min-h-[calc(100vh-120px)] transition-all duration-500 ${P?"opacity-100 scale-100 blur-0":"opacity-0 scale-95 blur-sm"}`,children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-16 items-start w-full",children:[e.jsx("section",{className:"w-full animate-in fade-in slide-in-from-left-8 duration-1000 order-2 lg:order-1 lg:pt-6 overflow-hidden",children:e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsx("div",{className:"text-center lg:text-left",children:e.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-display font-black text-white leading-none uppercase tracking-tighter drop-shadow-lg mb-4 sm:mb-5",children:r.stopName})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:text-left",children:[e.jsx("p",{className:"text-base sm:text-lg md:text-xl font-display font-black text-white leading-snug tracking-tight opacity-95",children:r.description[0]}),e.jsx("div",{className:"w-12 h-1 bg-sky/40 rounded-full hidden lg:block"}),e.jsx("p",{className:"text-sm md:text-base text-white/60 leading-relaxed font-bold",children:r.description[1]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-1 lg:justify-start justify-center",children:[e.jsx("button",{onClick:Le,className:"group/prev w-11 h-11 rounded-full bg-white/40 backdrop-blur-xl border border-white/50 flex items-center justify-center hover:bg-white/50 hover:border-white/60 transition-all duration-300",children:e.jsx(at,{size:17,className:"text-white group-hover/prev:text-white group-hover/prev:-translate-x-0.5 transition-all"})}),e.jsxs("button",{onClick:Ee,className:`group/next h-11 px-5 rounded-full backdrop-blur-xl border flex items-center gap-2 transition-all duration-300 ${a?"bg-accent/70 border-accent/80 hover:bg-accent/80 hover:border-accent":"bg-sky/70 border-sky/80 hover:bg-sky/80 hover:border-sky"}`,children:[e.jsx("span",{className:"text-[10.5px] font-black uppercase tracking-[0.15em] text-white",children:a?"Start Quiz":"Next"}),e.jsx(O,{size:15,className:"text-white transition-all group-hover/next:translate-x-0.5"})]})]})]})}),e.jsx("section",{className:"w-full flex flex-col items-center animate-in fade-in slide-in-from-right-8 duration-1000 order-1 lg:order-2 lg:pt-14 overflow-hidden",children:e.jsx("div",{className:"relative group w-full max-w-full",children:e.jsx(ee,{src:t,alt:r.stopName,imageKeyword:r.imageKeyword||r.stopName,caption:`${r.stopName}, ${n.name}`,region:"Active Stop",rotation:"rotate-0",className:"w-full"})})})]})},m)]})}if(h==="quiz"){const r=o.stops[m],a=m===o.stops.length-1,t=R[m];return e.jsxs(z,{className:`w-full min-h-screen bg-surface-dark flex flex-col items-center pt-20 md:pt-24 px-3 sm:px-4 md:px-6 relative overflow-x-hidden transition-all duration-700 ${w?"pb-[35vh] md:pb-[30vh]":"pb-12 md:pb-16"}`,children:[e.jsx(G,{title:`Knowledge Check - ${n.name}`,description:`Select the correct answer about ${r.stopName}.`}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[10%] right-[10%] w-[70%] h-[70%] bg-sky/10 rounded-full blur-[120px] opacity-80 animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[10%] left-[10%] w-[60%] h-[60%] bg-accent/5 rounded-full blur-[100px] opacity-60 animate-pulse-slow delay-700"}),e.jsx("div",{className:"absolute top-[30%] left-[20%] w-[40%] h-[40%] bg-white/5 rounded-full blur-[80px]"})]}),e.jsxs("div",{className:`flex-1 flex flex-col max-w-5xl mx-auto w-full min-h-0 py-2 relative z-10 transition-all duration-500 ${P?"opacity-100 scale-100 blur-0":"opacity-0 scale-95 blur-sm"} justify-center`,children:[e.jsxs("div",{className:"text-center mb-6 md:mb-8 shrink-0 animate-in fade-in slide-in-from-top-4 duration-1000",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 px-3 py-1 bg-sky/20 rounded-full border border-white/30 mb-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-sky animate-pulse"}),e.jsx("h2",{className:"text-[9px] font-black text-white uppercase tracking-[0.5em]",children:"Knowledge Check"})]}),e.jsx("div",{className:"w-48 md:w-64 h-1.5 bg-white/10 mx-auto relative rounded-full overflow-hidden shadow-inner border border-white/10",children:e.jsx("div",{className:"absolute h-full bg-gradient-to-r from-sky to-sky-light transition-all duration-1000 ease-out",style:{width:`${(m+1)/o.stops.length*100}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-10 items-center flex-1 min-h-0",children:[e.jsx("div",{className:"lg:col-span-5 flex flex-col justify-center animate-in fade-in slide-in-from-left-8 duration-1000",children:e.jsx(ee,{src:t,alt:r.stopName,imageKeyword:r.imageKeyword||r.stopName,caption:r.stopName,region:"Stop Detail",rotation:"-rotate-2",className:"max-w-[240px] md:max-w-[320px] lg:max-w-none mx-auto"})}),e.jsx("div",{className:"lg:col-span-7 flex flex-col animate-in fade-in slide-in-from-right-8 duration-1000 h-full justify-center overflow-hidden",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-3xl p-4 sm:p-5 md:p-8 rounded-2xl sm:rounded-3xl border border-white/40 flex flex-col relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-white/15 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-10 pointer-events-none"}),e.jsxs("div",{className:"flex flex-col justify-center gap-4 sm:gap-5 md:gap-8 relative z-10",children:[e.jsx("h3",{className:"text-base sm:text-lg md:text-2xl font-display font-black text-white leading-tight tracking-tighter drop-shadow-[0_10px_30px_rgba(0,0,0,0.5)] uppercase text-center border-b border-white/10 pb-4 sm:pb-5 md:pb-6",children:r.question}),e.jsx("div",{className:"grid grid-cols-1 gap-2.5 w-full",children:r.options.map((l,d)=>{const x=w===l;let v="bg-white/5 border border-white/20 text-white/70 hover:bg-white/15 hover:border-sky/50 hover:text-white";return x?k?v="bg-accent/70 border-accent text-white":v="bg-red-500/60 border-red-500 text-white":w&&l===r.answer?v="bg-accent/40 border-accent/80 text-white":w&&(v="opacity-20 grayscale border-white/5 bg-transparent scale-95 blur-[1px]"),e.jsxs("button",{onClick:()=>De(l),disabled:!!w,className:`w-full text-left px-3 sm:px-5 md:px-6 py-2.5 sm:py-3 md:py-4 rounded-xl md:rounded-2xl border transition-all duration-500 font-black text-[11px] sm:text-xs md:text-sm flex justify-between items-center relative overflow-hidden group/opt ${v} ${x&&!k?"animate-shake":""}`,style:{WebkitTapHighlightColor:"transparent"},children:[e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-10 group/opt:opacity-20 pointer-events-none rounded-[inherit]"}),e.jsx("span",{className:"leading-snug pr-2 sm:pr-4 relative z-10 drop-shadow-md uppercase tracking-tight",children:l})]},d)})})]})]})})]})]},m),e.jsx("div",{className:`fixed inset-0 z-[90] bg-black/40 transition-opacity duration-500 pointer-events-none ${w?"opacity-100":"opacity-0"}`}),e.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[100] bg-surface-dark flex flex-col justify-center transition-transform duration-500 cubic-bezier(0.16, 1, 0.3, 1) select-none pointer-events-auto touch-none overflow-hidden ${w?"translate-y-0":"translate-y-full"}`,style:{height:"max-content",minHeight:"32vh"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-white/10 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-10 pointer-events-none"}),e.jsxs("div",{className:"max-w-7xl mx-auto w-full p-10 md:p-16 flex flex-col md:flex-row items-center justify-between gap-12 relative z-10",children:[e.jsx("div",{className:"flex-1 text-left min-h-0",children:w&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex items-center justify-start gap-6",children:[e.jsxs("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center border-2 border-white/40 relative overflow-hidden ${k?"bg-accent/60 text-white":"bg-red-500/60 text-white"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-30"}),k?e.jsx(J,{size:32,className:"relative z-10"}):e.jsx(ae,{size:32,className:"relative z-10"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display font-black text-4xl md:text-5xl uppercase tracking-tighter drop-shadow-lg text-white leading-none mb-1",children:k?"Correct":"Incorrect"}),e.jsx("p",{className:`text-[10px] font-black uppercase tracking-[0.4em] drop-shadow-sm ${k?"text-accent":"text-red-400"}`,children:"Mission Explanation"})]})]}),e.jsx("p",{className:"text-base md:text-lg text-white/70 font-bold leading-relaxed max-w-3xl border-l-4 border-white/10 pl-8 text-left",children:Ce||""})]})}),e.jsx("div",{className:"w-full md:w-auto shrink-0 animate-in fade-in zoom-in duration-700 delay-200",children:e.jsxs("button",{onClick:Me,disabled:!w,className:"group relative w-full md:min-w-[300px] h-16 rounded-2xl overflow-hidden transition-all duration-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sky/70 via-sky/80 to-sky/70 group-hover:from-sky/80 group-hover:via-sky/90 group-hover:to-sky/80 transition-all"}),e.jsx("div",{className:"absolute inset-[1px] rounded-2xl border border-white/10"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-3 h-full",children:[e.jsx("span",{className:"text-sm font-black uppercase tracking-[0.2em] text-white/90",children:a?"Finish Tour":"Next Stop"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center group-hover:bg-white/20 transition-colors",children:e.jsx(O,{size:18,className:"text-white/80 transition-all"})})]})]})})]})]})]})}if(h==="summary"){const r=de===o.stops.length;return e.jsxs(z,{className:"w-full h-[100dvh] bg-surface-dark flex flex-col items-center justify-center pt-16 pb-6 px-3 sm:px-4 md:px-6 relative overflow-hidden",transparent:!0,children:[e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[120%] h-[120%] bg-sky/15 rounded-full blur-[160px] opacity-80 animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[100%] h-[100%] bg-accent/7.5 rounded-full blur-[140px] opacity-60 animate-pulse-slow"})]}),e.jsx("div",{className:`flex items-center justify-center relative z-10 w-full max-w-3xl transition-all duration-700 ${P?"opacity-100 scale-100 blur-0":"opacity-0 scale-95 blur-sm"}`,children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-3xl rounded-2xl p-4 md:p-6 w-full text-center border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-white/10 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-5 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 mb-4 pb-4 border-b border-white/5",children:[e.jsxs("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center border-2 border-white/20 relative shrink-0 group ${r?"bg-accent/30":"bg-sky/30"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-40 group-hover:opacity-60 transition-opacity rounded-[inherit]"}),e.jsx(J,{className:"w-6 h-6 text-white"})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-display font-black text-white uppercase tracking-tighter drop-shadow-md leading-tight mb-0.5",children:"Expedition Complete"}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3",children:[e.jsx("span",{className:"text-[8px] font-black text-white/30 uppercase tracking-[0.4em]",children:"Knowledge Check"}),e.jsx("div",{className:"h-px w-6 bg-white/10"}),e.jsxs("p",{className:"text-white font-black uppercase tracking-widest text-xs tabular-nums",children:[e.jsx("strong",{className:"text-sky",children:de})," ",e.jsx("span",{className:"text-white/20 mx-0.5",children:"/"})," ",o.stops.length]})]})]})]}),e.jsxs("div",{className:"mb-4 w-full relative bg-white/5 rounded-2xl p-2 border border-white/5 group/log overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 px-4 pt-2",children:e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-[8px] font-black text-white/30 uppercase tracking-[0.5em] mb-1",children:"Visual Log Archive"}),e.jsx("div",{className:"h-0.5 w-8 bg-sky/40 rounded-full"})]})}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("button",{onClick:()=>xe("left"),className:"absolute left-2 z-50 w-8 h-8 md:w-10 md:h-10 flex items-center justify-center rounded-xl bg-black/60 backdrop-blur-xl border border-white/10 hover:bg-white/10 hover:border-sky/50 transition-all group/btn","aria-label":"Scroll Left",children:e.jsx(nt,{size:20,className:"text-white/40 group-hover/btn:text-white transition-colors"})}),e.jsx("div",{ref:f,className:"flex gap-3 overflow-x-auto py-4 no-scrollbar cursor-grab active:cursor-grabbing select-none mx-auto px-4",style:{perspective:"1200px",transformStyle:"preserve-3d",scrollbarWidth:"none",msOverflowStyle:"none",scrollSnapType:"x mandatory",maxWidth:"520px"},onMouseDown:a=>{const t=f.current;t&&(t.dataset.isDragging="true",t.dataset.startX=String(a.clientX),t.dataset.scrollLeft=String(t.scrollLeft),t.dataset.lastX=String(a.clientX),t.dataset.velocity="0",t.style.scrollSnapType="none")},onMouseMove:a=>{const t=f.current;if(!t||t.dataset.isDragging!=="true")return;a.preventDefault();const l=a.clientX,d=l-Number(t.dataset.startX),x=l-Number(t.dataset.lastX);t.dataset.lastX=String(l),t.dataset.velocity=String(x),t.scrollLeft=Number(t.dataset.scrollLeft)-d},onMouseUp:()=>{const a=f.current;if(!a)return;a.dataset.isDragging="false",a.style.scrollSnapType="x mandatory";const t=window.innerWidth>=768?156:124,l=Math.round(a.scrollLeft/t);a.scrollTo({left:l*t,behavior:"smooth"})},onMouseLeave:()=>{const a=f.current;if(a){if(a.dataset.isDragging==="true"){a.style.scrollSnapType="x mandatory";const t=window.innerWidth>=768?156:124,l=Math.round(a.scrollLeft/t);a.scrollTo({left:l*t,behavior:"smooth"})}a.dataset.isDragging="false"}},onTouchStart:a=>{const t=f.current;t&&(t.dataset.isDragging="true",t.dataset.startX=String(a.touches[0].clientX),t.dataset.scrollLeft=String(t.scrollLeft),t.dataset.lastX=String(a.touches[0].clientX),t.dataset.velocity="0",t.style.scrollSnapType="none")},onTouchMove:a=>{const t=f.current;if(!t||t.dataset.isDragging!=="true")return;const l=a.touches[0].clientX,d=l-Number(t.dataset.startX),x=l-Number(t.dataset.lastX);t.dataset.lastX=String(l),t.dataset.velocity=String(x),t.scrollLeft=Number(t.dataset.scrollLeft)-d},onTouchEnd:()=>{const a=f.current;if(!a)return;a.dataset.isDragging="false",a.style.scrollSnapType="x mandatory";const t=window.innerWidth>=768?156:124,l=Math.round(a.scrollLeft/t);a.scrollTo({left:l*t,behavior:"smooth"})},children:[...o.stops,...o.stops,...o.stops].map((a,t)=>{const l=t%o.stops.length,d=ze[l],x=R[l];return e.jsx("div",{className:"carousel-card flex-shrink-0 w-28 h-44 md:w-36 md:h-52 relative transition-all duration-300 ease-out",style:{transformStyle:"preserve-3d",scrollSnapAlign:"center"},children:e.jsxs("div",{className:`h-full bg-white/5 backdrop-blur-2xl rounded-lg border transition-all duration-300 relative overflow-hidden flex flex-col p-1 group/card 
                                  ${d?"border-accent/30":"border-red-500/30"}
                                `,children:[e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-10 pointer-events-none"}),e.jsxs("div",{className:"w-full aspect-[4/5] rounded-md overflow-hidden relative shadow-inner bg-black border border-white/5 mb-1.5",children:[e.jsx(te,{src:x,alt:a.stopName,className:`w-full h-full object-cover transition-all duration-500 pointer-events-none ${d?"brightness-110":"grayscale brightness-50 opacity-40"}`,draggable:!1}),e.jsx("div",{className:"absolute top-1.5 right-1.5 z-10",children:d?e.jsx("div",{className:"w-5 h-5 rounded-md bg-accent/90 flex items-center justify-center text-white border border-white/30 backdrop-blur-md",children:e.jsx(J,{size:10})}):e.jsx("div",{className:"w-5 h-5 rounded-md bg-red-500/90 flex items-center justify-center text-white border border-white/30 backdrop-blur-md",children:e.jsx(Ze,{size:10})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/40 via-transparent to-white/10 pointer-events-none"})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center px-1.5",children:[e.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-white/80 uppercase tracking-wider leading-tight line-clamp-2 text-center drop-shadow-sm group-hover/card:text-white transition-colors",children:a.stopName}),e.jsx("div",{className:`mt-1 h-0.5 w-4 mx-auto rounded-full transition-all duration-300 group-hover/card:w-8 ${d?"bg-accent/40":"bg-red-500/40"}`})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 via-transparent to-white/5 pointer-events-none"})]})},t)})}),e.jsx("button",{onClick:()=>xe("right"),className:"absolute right-2 z-50 w-8 h-8 md:w-10 md:h-10 flex items-center justify-center rounded-xl bg-black/60 backdrop-blur-xl border border-white/10 hover:bg-white/10 hover:border-sky/50 transition-all group/btn","aria-label":"Scroll Right",children:e.jsx(O,{size:20,className:"text-white/40 group-hover/btn:text-white transition-colors"})}),e.jsx("div",{className:"absolute inset-y-2 left-2 w-16 bg-gradient-to-r from-black/40 to-transparent pointer-events-none z-10 hidden md:block rounded-l-2xl"}),e.jsx("div",{className:"absolute inset-y-2 right-2 w-16 bg-gradient-to-l from-black/40 to-transparent pointer-events-none z-10 hidden md:block rounded-r-2xl"})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3 relative z-10 border-t border-white/5 pt-4",children:[e.jsxs("button",{onClick:Ae,className:"group relative w-full max-w-[280px] h-12 rounded-2xl overflow-hidden transition-all duration-500",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sky/70 via-sky/80 to-sky/70 group-hover:from-sky/80 group-hover:via-sky/90 group-hover:to-sky/80 transition-all"}),e.jsx("div",{className:"absolute inset-[1px] rounded-2xl border border-white/10"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-3 h-full",children:[e.jsx(ct,{size:14,className:"text-white/80 group-hover:rotate-[-180deg] transition-transform duration-700"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.2em] text-white/90",children:"Restart Tour"})]})]}),e.jsx("button",{onClick:()=>s(`/country/${n.id}`),className:"py-1.5 text-[9px] font-black text-white/30 hover:text-white uppercase tracking-[0.3em] transition-all flex items-center justify-center gap-2 group/back",children:"RETURN TO PROFILE"})]})]})]})})]})}}catch(r){return console.error("[Expedition] Render Error:",r),e.jsxs("div",{className:"pt-32 text-center text-white p-10 bg-surface-dark min-h-screen flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"text-2xl font-black uppercase mb-4",children:"Display Error"}),e.jsx("p",{className:"text-red-400 font-mono text-xs bg-black/50 p-4 rounded-xl border border-white/10 mb-8 max-w-md",children:r.message}),e.jsx(fe,{onClick:()=>window.location.reload(),variant:"primary",children:"RELOAD EXPEDITION"})]})}return null};return e.jsxs(e.Fragment,{children:[q&&Qe.createPortal(e.jsxs("div",{className:`fixed inset-0 z-[5000] flex items-center justify-center pointer-events-none [transform:translateZ(0)] [-webkit-transform:translateZ(0)] [backface-visibility:hidden] [-webkit-backface-visibility:hidden] ${oe==="forward"?"animate-aero-wipe-full-forward":"animate-aero-wipe-full-backward"}`,"aria-hidden":"true",children:[e.jsxs("div",{className:"absolute inset-0 bg-surface-dark",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[70%] h-[70%] bg-sky/15 rounded-full blur-[120px] animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[-5%] right-[-5%] w-[60%] h-[60%] bg-accent/10 rounded-full blur-[100px] animate-pulse-slow delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%] bg-white/[0.02] backdrop-blur-3xl"})]}),e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-20"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-sky/30 rounded-full blur-3xl animate-pulse"}),e.jsxs("div",{className:"w-44 h-44 rounded-full bg-white/10 backdrop-blur-3xl border-2 border-white/30 flex items-center justify-center overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-glossy-gradient opacity-40"}),e.jsxs("div",{className:"absolute inset-2 rounded-full border border-white/20 animate-[spin_12s_linear_infinite]",children:[e.jsx("span",{className:"absolute top-1 left-1/2 -translate-x-1/2 text-[8px] font-bold text-sky/80",children:"N"}),e.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 text-[8px] font-bold text-white/40",children:"S"}),e.jsx("span",{className:"absolute left-1 top-1/2 -translate-y-1/2 text-[8px] font-bold text-white/40",children:"W"}),e.jsx("span",{className:"absolute right-1 top-1/2 -translate-y-1/2 text-[8px] font-bold text-white/40",children:"E"})]}),e.jsxs("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-sky/20 to-accent/20 border border-white/20 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 animate-[spin_3s_linear_infinite]",children:e.jsx(lt,{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-6 h-6 text-sky rotate-90"})}),e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"w-10 h-10 text-white animate-bounce",style:{animationDuration:"2s"}}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-4 h-1 bg-white/30 rounded-full blur-sm"})]})]}),[...Array(12)].map((r,a)=>e.jsx("div",{className:"absolute w-1.5 h-1.5 rounded-full bg-white/30",style:{top:"50%",left:"50%",transform:`rotate(${a*30}deg) translateY(-80px) translateX(-50%)`}},a))]}),e.jsx("div",{className:"absolute inset-0 rounded-full border border-sky/30 animate-ping",style:{animationDuration:"2s"}}),e.jsx("div",{className:"absolute -inset-4 rounded-full border border-white/10 animate-ping",style:{animationDuration:"3s",animationDelay:"0.5s"}})]}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-white/70",children:oe==="forward"?Te:Se})]})]}),document.body),e.jsx(Ve,{mode:"wait",children:_e()}),h!=="quiz"&&e.jsx(et,{type:k===null?null:k?"correct":"incorrect",triggerKey:$e})]})};export{zt as default};
