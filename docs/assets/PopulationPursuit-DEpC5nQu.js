import{j as e,A as T,m as w}from"./vendor-motion-CUvbj6jv.js";import{r as s,d as Z,L as ee}from"./vendor-react-CJteECPR.js";import{MOCK_COUNTRIES as te}from"./constants-CGQAZN13.js";import{a as se,u as ae,B as O}from"./index-CcyCdUdq.js";import{S as R}from"./SEO-DNVce3To.js";import{F as re}from"./FeedbackOverlay-CynBASEN.js";import{x as ie,P as le,v as k,c as W,w as ne}from"./vendor-icons-DnoOvNGG.js";import"./vendor-firebase-BmNGKg-n.js";const oe=a=>{if(!a)return 0;const n=parseFloat(a.replace(/[^0-9.]/g,""));return a.includes("B")?n*1e9:a.includes("M")?n*1e6:a.includes("K")?n*1e3:n},v=a=>Array.from(a).map(n=>String.fromCharCode(n.codePointAt(0)-127397).toLowerCase()).join("");function we(){const[a,n]=s.useState("start"),[h,N]=s.useState(0),[o,z]=s.useState(60),[d,G]=s.useState(null),[m,K]=s.useState(null),[c,j]=s.useState(null),[U,P]=s.useState(0),[H,S]=s.useState(null),[V,C]=s.useState(!1),[Y,$]=s.useState(!1),[ce,de]=s.useState([]),[A,E]=s.useState(!1),{recordGameResult:M}=se(),I=Z(),{setPageLoading:B}=ae(),i=s.useMemo(()=>te.map(t=>({...t,numericPop:oe(t.population)})),[]);s.useEffect(()=>{B(!1)},[B]),s.useEffect(()=>{let t;return a==="playing"&&o>0?t=setInterval(()=>{z(r=>r-1)},1e3):o===0&&n("finished"),()=>clearInterval(t)},[a,o]);const q=t=>{const r=Math.floor(t/60),x=t%60;return`${r}:${String(x).padStart(2,"0")}`};s.useEffect(()=>{a==="finished"&&!A&&(M({gameId:"population-pursuit",score:h,durationSeconds:60-o}),E(!0))},[a,A,M,h,o]);const L=s.useCallback(()=>{j(null),S(null),C(!1),$(!1);const t=Math.floor(Math.random()*i.length);let r=Math.floor(Math.random()*i.length);for(;r===t;)r=Math.floor(Math.random()*i.length);G(i[t]),K(i[r]),(()=>{const u=Math.floor(Math.random()*i.length),p=Math.floor(Math.random()*i.length);[`https://flagcdn.com/w320/${v(i[u].flag)}.png`,`https://flagcdn.com/w320/${v(i[p].flag)}.png`].forEach(f=>{const y=new Image;y.src=f})})()},[i]),_=()=>{N(0),z(60),E(!1),j(null),P(0),L(),n("playing")},D=t=>{if(c||!d||!m)return;S(t.id);const r=d.numericPop,x=m.numericPop,p=t.numericPop===Math.max(r,x);j(p?"correct":"incorrect"),P(l=>l+1),p&&N(l=>l+10),setTimeout(L,700)};return e.jsx("div",{className:"h-[100dvh] min-h-screen bg-surface-dark font-sans relative overflow-hidden",children:e.jsxs(T,{mode:"wait",children:[a==="start"&&e.jsxs(w.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},className:"h-full flex items-center justify-center px-4",children:[e.jsx(R,{title:"Population Pursuit",description:"Which country has more people?"}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[100%] h-[100%] bg-sky/20 rounded-full blur-[150px] opacity-60 animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[80%] h-[80%] bg-accent/10 rounded-full blur-[120px] opacity-40 animate-pulse-slow"})]}),e.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-3xl rounded-3xl p-8 text-center border-2 border-white/20 relative z-10 overflow-hidden",children:[e.jsx("div",{className:"w-20 h-20 bg-sky/20 rounded-2xl flex items-center justify-center mx-auto mb-8 text-sky border border-white/30 relative overflow-hidden",children:e.jsx(ie,{size:36,className:"relative z-10"})}),e.jsx("h1",{className:"text-4xl font-display font-black text-white mb-2 uppercase tracking-tighter drop-shadow-md",children:"Population Pursuit"}),e.jsx("p",{className:"text-white/40 text-[10px] mb-10 font-bold uppercase tracking-[0.2em] leading-relaxed",children:"Choose the larger population."}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(O,{onClick:_,size:"md",className:"w-full h-16 text-xl uppercase tracking-widest font-black",children:["PLAY ",e.jsx(le,{size:20,fill:"currentColor"})]}),e.jsxs("button",{onClick:()=>I("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group relative z-20 pointer-events-auto",children:[e.jsx(k,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})]},"start"),a==="playing"&&d&&m&&e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"h-full flex flex-col px-3 md:px-4 pt-20 pb-4 md:pb-6 overflow-hidden",children:[e.jsx(R,{title:"Playing Population Pursuit",description:"Choose the larger population."}),e.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[10%] right-[10%] w-[60%] h-[60%] bg-sky/10 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[10%] left-[10%] w-[50%] h-[50%] bg-accent/5 rounded-full blur-[80px]"})]}),e.jsxs("div",{className:"max-w-5xl mx-auto w-full flex shrink-0 items-center gap-2 mb-3 md:mb-4 bg-white/10 backdrop-blur-2xl p-2.5 md:p-3 rounded-2xl border border-white/20 z-10",children:[e.jsx(ee,{to:"/games",className:"p-2 bg-white/10 hover:bg-white/20 rounded-xl text-white/60 hover:text-white transition-all duration-75 border border-white/10 group shadow-inner shrink-0",children:e.jsx(k,{size:18,className:"transition-transform"})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center min-w-0",children:[e.jsx("h1",{className:"text-[9px] sm:text-[10px] font-black text-white uppercase tracking-[0.15em] sm:tracking-[0.3em] drop-shadow-md truncate max-w-full text-center",children:"Population Pursuit"}),e.jsx("div",{className:"h-0.5 w-6 bg-sky/40 rounded-full mt-1"})]}),e.jsx("div",{className:"w-[42px] shrink-0"})]}),e.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full flex flex-col min-h-0 bg-white/10 backdrop-blur-3xl rounded-2xl md:rounded-3xl border border-white/20 overflow-hidden relative z-10 p-3 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 sm:mb-3 md:mb-4 relative z-20 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-2.5 py-1 md:px-3 md:py-1.5 rounded-xl shadow-inner bg-warning/20 border border-warning/40 relative shrink-0",children:[e.jsx(W,{size:14,className:"sm:w-4 sm:h-4 md:w-[18px] md:h-[18px] text-warning drop-shadow-md relative z-10"}),e.jsx("span",{className:"font-display font-black text-base sm:text-lg md:text-xl text-white tabular-nums drop-shadow-sm relative z-10",children:h})]}),e.jsxs("div",{className:`flex items-center gap-1.5 sm:gap-2 px-2 sm:px-2.5 py-1 md:px-3 md:py-1.5 rounded-xl shadow-inner transition-all duration-300 relative shrink-0 ${o<10?"bg-red-500/10 border-2 border-error animate-timer-panic":"bg-sky/25 text-white border border-white/30"}`,children:[e.jsx("div",{className:`relative z-10 ${o<10?"text-error":"text-sky-light"}`,children:e.jsx(ne,{size:14,className:"sm:w-4 sm:h-4 md:w-[18px] md:h-[18px]"})}),e.jsx("span",{className:`font-display font-black text-base sm:text-lg md:text-xl tabular-nums min-w-[28px] sm:min-w-[32px] md:min-w-[36px] relative z-10 drop-shadow-sm ${o<10?"text-error":"text-white"}`,children:q(o)})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col px-0 md:px-2 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-3 md:mb-4 shrink-0",children:[e.jsx("p",{className:"text-sky-light font-black text-[9px] md:text-xs uppercase tracking-[0.3em]",children:"Which country has the"}),e.jsx("h2",{className:"text-white font-display font-black text-xl md:text-3xl uppercase tracking-tighter drop-shadow-lg",children:"Larger Population?"})]}),e.jsx(T,{mode:"wait",children:e.jsx(w.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.02},transition:{duration:.3},className:"w-full h-full grid grid-cols-2 gap-3 md:gap-5 max-w-xl md:max-w-4xl mx-auto",children:[d,m].map((t,r)=>{if(!t)return null;const x=r===0?m:d,u=t.numericPop,p=x.numericPop,l=u>=p,f=r===0,y=f?V:Y,J=f?C:$,Q=v(t.flag),F=H===t.id,X=F&&!l;let g="bg-white/5 border border-white/10 active:bg-white/15 active:border-sky/50",b="text-white/80";return c&&(l?(g="bg-accent/60 border-2 border-accent z-20",b="text-white"):F?(g="bg-red-500/60 border-2 border-red-500 z-10",b="text-white"):(g="bg-black/20 border-white/5 opacity-30 z-0",b="text-white/20")),e.jsxs("div",{onClick:()=>D(t),className:`min-h-0 md:min-h-[320px] relative rounded-2xl md:rounded-3xl p-3 md:p-6 flex flex-col items-center justify-center transition-[background-color,border-color,opacity,transform] duration-300 cursor-pointer group overflow-hidden ${g} ${X?"animate-shake":""}`,style:{WebkitTapHighlightColor:"transparent"},children:[e.jsx("div",{className:"mb-1 md:mb-2 flex items-center justify-center relative z-10 w-full min-h-[60px] md:min-h-[140px]",children:y?e.jsx("div",{className:`w-full max-w-[100px] md:max-w-[160px] aspect-[3/2] transition-all duration-500 ease-out ${c?"scale-[0.92] md:scale-[0.88]":"scale-100"} ${c&&!l?"opacity-40":"opacity-100"}`,children:e.jsx("img",{src:`https://flagcdn.com/w160/${v(t.flag)}.png`,alt:`${t.name} flag fallback`,className:"w-full h-full object-contain filter drop-shadow-[0_8px_16px_rgba(0,0,0,0.3)]"})}):e.jsx("div",{className:`w-full max-w-[100px] md:max-w-[200px] aspect-[3/2] flex items-center justify-center transition-all duration-500 ease-out ${c?"scale-[0.92] md:scale-[0.88]":"scale-100"}`,children:e.jsx("img",{src:`https://flagcdn.com/w320/${Q}.png`,alt:`${t.name} flag`,className:`w-full h-full object-contain filter drop-shadow-[0_8px_16px_rgba(0,0,0,0.3)] transition-opacity duration-500 ${c&&!l?"opacity-40":"opacity-100"}`,onError:()=>J(!0)})})}),e.jsx("h3",{className:`text-xs md:text-xl font-display font-black mb-0 md:mb-2 leading-tight uppercase tracking-tighter transition-all duration-500 drop-shadow-lg line-clamp-2 text-center relative z-10 px-1 md:px-4 ${b}`,children:t.name}),e.jsxs("div",{className:`text-center relative z-10 w-full px-2 md:px-4 shrink-0 transition-[opacity,transform] ${c?"duration-500 opacity-100 scale-100 mt-2 md:mt-3":"duration-0 opacity-0 scale-90 h-0 overflow-hidden pointer-events-none"}`,children:[e.jsx("div",{className:"h-px w-6 md:w-12 bg-white/20 mx-auto mb-1.5 md:mb-3"}),e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("span",{className:"text-sky-light uppercase font-black text-[6px] md:text-[9px] tracking-[0.2em] md:tracking-[0.3em] mb-0.5 font-sans",children:"POPULATION"}),e.jsx("div",{className:`text-[11px] md:text-3xl font-display font-black tracking-tighter tabular-nums drop-shadow-[0_3px_10px_rgba(0,0,0,0.5)] ${l?"text-white":"text-white/60"}`,children:t.population})]})]})]},t.id)})},d?.id+(m?.id||""))})]})]}),e.jsx(re,{type:c,triggerKey:U})]},"playing"),a==="finished"&&e.jsx(w.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-3xl rounded-3xl p-10 text-center border-2 border-white/20 relative z-10 overflow-hidden",children:[e.jsx("div",{className:"w-20 h-20 bg-warning/20 rounded-full flex items-center justify-center mx-auto mb-8 text-warning border border-white/30 relative overflow-hidden",children:e.jsx(W,{size:36,className:"relative z-10"})}),e.jsx("h1",{className:"text-3xl font-display font-black text-white mb-1 uppercase tracking-tighter drop-shadow-md",children:"Finished"}),e.jsx("p",{className:"text-white/40 mb-6 text-[10px] font-bold uppercase tracking-[0.2em] drop-shadow-sm",children:"Final Score"}),e.jsx("div",{className:"text-7xl font-display font-black text-white mb-10 tabular-nums",children:h}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(O,{onClick:_,size:"md",className:"w-full h-16 text-xl uppercase tracking-widest font-black",children:"Play Again"}),e.jsxs("button",{onClick:()=>I("/games"),className:"inline-flex items-center justify-center gap-2 text-white/30 hover:text-white transition-all font-black uppercase tracking-[0.3em] text-[10px] group relative z-20 pointer-events-auto",children:[e.jsx(k,{size:14,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Games"]})]})]})},"finished")]})})}export{we as default};
