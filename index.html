<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <meta name="theme-color" content="#0F172A" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="ExploreCapitals" />
    
    <!-- Primary SEO -->
    <title>ExploreCapitals.com | Master World Geography & Capitals</title>
    <meta name="description" content="ExploreCapitals is a premium geography education platform offering interactive maps, quizzes, and data to help you master world capitals and national demographics." />
    <meta name="keywords" content="world capitals, geography games, interactive world map, country database, educational geography, capital city quiz" />
    <link rel="canonical" href="https://explorecapitals.com/" />

    <!-- Favicon & App Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/logo.png">
    <link rel="mask-icon" href="/logo.png" color="#00C2FF">
    <link rel="manifest" href="/manifest.json" />

    <!-- Preconnect to critical origins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Font loading with display=swap for instant text -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet"></noscript>

    <!-- Leaflet CSS - Lazy load, only needed for map pages -->
    <link rel="preload" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" as="style" onload="this.onload=null;this.rel='stylesheet'" crossorigin>
    <noscript><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin></noscript>
    
    <!-- Leaflet JS - Defer since it's only needed on map pages -->
    <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

    <!-- Analytics - Load after page is interactive -->
    <script>
      window.addEventListener('load', function() {
        setTimeout(function() {
          var gtag = document.createElement('script');
          gtag.src = 'https://www.googletagmanager.com/gtag/js?id=G-8NEFW5WL3V';
          gtag.async = true;
          document.head.appendChild(gtag);
          
          window.dataLayer = window.dataLayer || [];
          function gtagFn(){dataLayer.push(arguments);}
          window.gtag = gtagFn;
          gtagFn('js', new Date());
          gtagFn('config', 'G-8NEFW5WL3V');
          
          setTimeout(function() {
            var adsense = document.createElement('script');
            adsense.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8144074549309997';
            adsense.async = true;
            adsense.crossOrigin = 'anonymous';
            document.head.appendChild(adsense);
          }, 3000);
        }, 100);
      });
    </script>

    <!-- CRITICAL CSS - Inline for instant render -->
    <style>
      /* Base reset and critical styles */
      *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

      html {
        -webkit-text-size-adjust: 100%;
        background-color: #0F172A;
        height: -webkit-fill-available;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        overflow-x: clip; 
        color-scheme: dark;
      }
      
      body { 
        -webkit-font-smoothing: antialiased; 
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        background-color: #0F172A;
        min-height: 100vh;
        min-height: 100dvh;
        min-height: -webkit-fill-available;
        overflow-x: hidden;
        color: #fff;
      }
      
      #root {
        min-height: 100vh;
        min-height: 100dvh;
        display: flex;
        flex-direction: column;
        overflow-x: hidden;
      }

      /* Loading skeleton - shows instantly before React mounts */
      .app-loader {
        position: fixed;
        inset: 0;
        background: #0F172A;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        opacity: 1;
        transition: opacity 0.3s ease-out;
      }
      
      .app-loader.fade-out {
        opacity: 0;
        pointer-events: none;
      }
      
      .loader-logo {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(180deg, #BFE6FF 0%, #00C2FF 48%, #007AFF 52%, #00C2FF 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 24px;
        box-shadow: 0 0 60px rgba(0, 194, 255, 0.3);
        animation: pulse-glow 2s ease-in-out infinite;
      }
      
      .loader-logo img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transform: scale(1.4);
      }
      
      .loader-spinner {
        width: 32px;
        height: 32px;
        border: 2px solid rgba(0, 194, 255, 0.2);
        border-top-color: #00C2FF;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      
      .loader-text {
        margin-top: 16px;
        font-size: 10px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.3em;
        color: rgba(255, 255, 255, 0.3);
      }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      
      @keyframes pulse-glow {
        0%, 100% { box-shadow: 0 0 40px rgba(0, 194, 255, 0.2); }
        50% { box-shadow: 0 0 80px rgba(0, 194, 255, 0.4); }
      }

      /* Skeleton shimmer for content placeholder */
      .skeleton-nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        padding: 0 24px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        z-index: 100;
      }
      
      .skeleton-logo {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .skeleton-circle {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: linear-gradient(90deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 100%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
      }
      
      .skeleton-text {
        height: 20px;
        width: 140px;
        border-radius: 4px;
        background: linear-gradient(90deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 100%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
      }
      
      @keyframes shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }

      /* Hide scrollbars */
      ::-webkit-scrollbar { display: none; }
      * { -ms-overflow-style: none; scrollbar-width: none; }
      
      /* Selection color */
      ::selection { background-color: #00C2FF; color: white; }
      
      /* Touch device optimizations */
      button, a, [role="button"], input, select, textarea {
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      /* Safe area for notched devices */
      body { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
  <body>
    <!-- Loading Screen - Visible instantly, hidden when React mounts -->
    <div id="app-loader" class="app-loader">
      <div class="loader-logo">
        <img src="./logo.png" alt="" width="80" height="80">
      </div>
      <div class="loader-spinner"></div>
      <div class="loader-text">Loading</div>
    </div>
    
    <div id="root"></div>
    <div id="modal-root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
